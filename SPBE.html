<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/x-icon" href="./Miscellaneous/Main Favicon.ico">
  <style>
    /* Global styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background-color: #f0f8f0;
      margin: 0;
      font-family: Segoe, "Segoe UI", "DejaVu Sans", "Trebuchet MS", Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
    }
    
    h1, p {
      text-indent: 25px;
    }
    
    /* Navigation styles */
    .nav-container {
      background-color: #333;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      position: relative;
    }
    
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    
    .logo img {
      width: 42px;
      height: 38px;
      vertical-align: middle;
    }
    
    .nav-menu {
      list-style-type: none;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      margin-left: 0;
      width: 100%;
      justify-content: flex-start;
    }
    
    .nav-menu li {
      flex: 0 0 auto;
    }
    
    .nav-menu li a {
      display: block;
      color: white;
      text-align: center;
      padding: 20px 16px;
      text-decoration: none;
      white-space: nowrap;
      transition: background-color 0.2s;
    }
    
    .nav-menu li a:hover {
      background-color: #444;
    }
    
    .menu-toggle {
      display: none;
      color: white;
      background: none;
      border: none;
      font-size: 24px;
      padding: 12px 16px;
      cursor: pointer;
      margin-left: auto;
    }
    
    #app-container {
      margin: 20px;
    }
    
    /* Legend for colours */
    .legend {
      margin: 10px 0;
      padding: 10px;
      background-color: #f1f1f1;
      border: 2px solid #388e3c;
      border-radius: 8px;
      font-size: 0.9rem;
      color: #1b5e20;
    }
    
    .legend span.box {
      display: inline-block;
      width: 16px;
      height: 16px;
      margin-right: 5px;
      vertical-align: middle;
      border: 1px solid #000;
    }
    
    .legend .hazards-active { background-color: #2e7d32; }
    .legend .place-active { background-color: #1565c0; }
    .legend .inactive { background-color: #757575; }
    
    /* Subtopic buttons */
    .subtopic-section {
      margin-bottom: 16px;
    }
    
    .subtopic-section h5 {
      margin: 8px 0 4px;
      color: #1b5e20;
    }
    
    .subtopic-button {
      margin-right: 8px;
      margin-bottom: 8px;
      padding: 6px 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
    }
    
    /* For subtopics, use shades based on category */
    .conceptual-active { background-color: #2e7d32; color: white; }
    .conceptual-inactive { background-color: #a5d6a7; color: #1b5e20; }
    .casestudy-active { background-color: #1565c0; color: white; }
    .casestudy-inactive { background-color: #90caf9; color: #1b5e20; }
    
    /* Topic buttons */
    .topic-button {
      margin-right: 8px;
      margin-bottom: 8px;
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
    
    .hazards-topic-active { background-color: #2e7d32; color: white; }
    .place-topic-active { background-color: #1565c0; color: white; }
    .topic-inactive { background-color: #a5d6a7; color: white; }
    
    /* Flashcard container */
    .flashcard-container {
      background-color: #f0f8f0;
      border-radius: 8px;
      box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1);
      padding: 24px;
      min-height: 16rem;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      border: 2px solid #388e3c;
      position: relative;
    }
    
    .progress-indicator {
      position: absolute;
      top: 8px;
      right: 12px;
      font-size: 0.9rem;
      color: #2e7d32;
    }
    
    /* Answer text background */
    .flashcard-container .answer {
      background-color: transparent;
      padding: 8px;
      border-radius: 4px;
    }
    
    /* Fix for list items inside flashcard answers */
    .flashcard-container ul {
      background-color: transparent;
      list-style-type: disc;
      overflow: visible;
      margin-left: 20px;
      padding-left: 5px;
    }
    
    .flashcard-container li {
      float: none;
      background-color: transparent;
      color: #1b5e20;
      margin-bottom: 4px;
      display: list-item;
    }
    
    /* Fix for list items inside the exam tips box */
    #app-container ul {
      background-color: transparent;
      list-style-type: disc;
      overflow: visible;
      margin-left: 20px;
      padding-left: 5px;
    }
    
    #app-container li {
      float: none;
      background-color: transparent;
      color: #1b5e20;
      margin-bottom: 4px;
      display: list-item;
      clear: both;
    }
    
    /* Media queries for responsive design */
    @media screen and (max-width: 1100px) {
      .menu-toggle {
        display: block !important;
      }
      
      .nav-menu {
        display: none;
        width: 100%;
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: #333;
        z-index: 99;
      }
      
      .nav-menu.active {
        display: flex !important;
      }
      
      .nav-menu li {
        width: 100%;
      }
      
      .nav-menu li a {
        text-align: left;
        padding: 16px 20px;
        border-top: 1px solid #444;
      }
      
      .subtopic-section {
        display: flex;
        flex-wrap: wrap;
      }
      
      .subtopic-section h5 {
        width: 100%;
      }
      
      .legend {
        font-size: 0.8rem;
      }
      
      .topic-button, .subtopic-button {
        font-size: 0.85rem;
        padding: 6px 8px;
      }
    }
    
    @media screen and (max-width: 600px) {
      h1 {
        font-size: 1.5rem;
        text-align: center;
      }
      
      .flashcard-container {
        padding: 16px;
        min-height: 14rem;
      }
      
      .progress-indicator {
        position: static;
        text-align: right;
        margin-bottom: 8px;
      }
      
      .legend {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 4px;
      }
    }
  </style>
  <title>Geography Flashcards</title>
  <!-- React and ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <!-- Navigation with hamburger menu -->
  <div class="nav-container">
    <a href="index.html" class="logo">
      <img src="Logo.png" alt="Logo">
    </a>
    <button class="menu-toggle" aria-label="Toggle navigation menu">☰</button>
    <ul class="nav-menu">
      <li><a href="PR.html">GCSE Past Papers & Boundaries</a></li>
      <li><a href="APR.html">A Level & BTEC Past Papers</a></li>
      <li><a href="SPBE.html">Geography Flashcards</a></li>
      <li><a href="BWT.html">Geography Case Studies</a></li>
      <li><a href="test.html">Test Page</a></li>
    </ul>
  </div>
  
  <!-- React App Container -->
  <div id="app-container"></div>
  
  <!-- React Component -->
  <script type="text/babel">
    const GeographyFlashcardApp = () => {
      // State declarations
      const [flashcards, setFlashcards] = React.useState([]);
      const [currentCardIndex, setCurrentCardIndex] = React.useState(0);
      const [showAnswer, setShowAnswer] = React.useState(false);
      const [searchTerm, setSearchTerm] = React.useState('');
      const [filteredCards, setFilteredCards] = React.useState([]);
      const [showStats, setShowStats] = React.useState(false);
      const [cardStats, setCardStats] = React.useState({});
      // States for topic and subtopic selection
      const [selectedTopic, setSelectedTopic] = React.useState(null);
      // selectedSubtopic is an object: { category: "Conceptual" or "Case Study", name: string }
      const [selectedSubtopic, setSelectedSubtopic] = React.useState({ category: null, name: null });
      // Define subtopics for each main topic – split into Conceptual and Case Studies.
      const hazardsConceptual = [
        "Concept of Hazard in Geography",
        "Plate Tectonics and Hazards",
        "Volcanic Hazards",
        "Seismic Hazards",
        "Storm Hazards",
        "Wildfire Hazards",
        "Multi-Hazard Environments",
        "Risk Management & Resilience",
        "Fold Mountains Formation",
        "Rift Valleys & Ocean Ridges"
      ];
      const hazardsCaseStudies = [
        "Mt Etna",
        "Mt Merapi",
        "Eyjafjallajökull",
        "Montserrat",
        "Yellowstone",
        "Boxing Day Tsunami",
        "Haiti",
        "Cyclone Nargis",
        "Hurricane Katrina",
        "LA Wildfire",
        "Alberta Wildfire",
        "Tohoku",
        "Typhoon Haiyan"
      ];
      const placeConceptual = [
        "Concept of Place & Identity",
        "Insider vs Outsider Perspectives",
        "Economic Change & Population Trends",
        "Urbanisation & Migration",
        "Sustainable Urban Development",
        "Big Data & GIS in Geography",
        "Oral Data & Local Narratives",
        "Spatial Patterns & Land Use",
        "Cultural & Social Change"
      ];
      const placeCaseStudies = [
        "Ground Zero",
        "Plymouth",
        "Detroit",
        "London Olympics",
        "Medellin",
        "Bourneville",
        "Devonport",
        "Stonehenge",
        "Glastonbury"
      ];
      // Main topic configuration (active colours: Hazards = green; Place = blue)
      const topicConfig = [
        {
          topic: "Hazards",
          activeColor: "#2e7d32",
          conceptual: hazardsConceptual,
          caseStudies: hazardsCaseStudies
        },
        {
          topic: "Place",
          activeColor: "#1565c0",
          conceptual: placeConceptual,
          caseStudies: placeCaseStudies
        }
      ];
      // Detailed case study facts with bullet points and actual numbers
      const hazardsCaseStudyFacts = {
        "Mt Etna": `<ul>
  <li>VEI: 2-3</li>
  <li>2021 eruption: ash plume up to 3 km high</li>
  <li>Casualties: minimal due to monitoring</li>
</ul>`,
        "Mt Merapi": `<ul>
  <li>2010 eruption: VEI 4</li>
  <li>Deaths: ~353</li>
  <li>Injuries: >1,000; significant infrastructure damage</li>
</ul>`,
        "Eyjafjallajökull": `<ul>
  <li>2010 eruption: VEI 4</li>
  <li>Ash cloud: reached 9 km high, disrupted European air travel for 6 days</li>
  <li>Direct casualties: minimal</li>
</ul>`,
        "Montserrat": `<ul>
  <li>Active since 1995</li>
  <li>Evacuation: ~2/3 of population</li>
  <li>Long-term socio-economic impact</li>
</ul>`,
        "Yellowstone": `<ul>
  <li>Supervolcano; last major eruption: >600,000 years ago</li>
  <li>Potential eruption: VEI 8; catastrophic global impact</li>
</ul>`,
        "Boxing Day Tsunami": `<ul>
  <li>Triggered by 9.1-9.3 magnitude earthquake in 2004</li>
  <li>Deaths: ~230,000</li>
  <li>Massive infrastructural damage</li>
</ul>`,
        "Haiti": `<ul>
  <li>2010 earthquake: magnitude 7.0</li>
  <li>Deaths: >230,000; Injuries: ~300,000</li>
  <li>Damage: $8-14 billion</li>
</ul>`,
        "Cyclone Nargis": `<ul>
  <li>2008 event in Myanmar</li>
  <li>Deaths: ~138,000; Millions displaced</li>
  <li>Severe infrastructure damage</li>
</ul>`,
        "Hurricane Katrina": `<ul>
  <li>2005 event: ~1,833 deaths</li>
  <li>Displacement: >250,000 people</li>
  <li>Damage: >$125 billion</li>
</ul>`,
        "LA Wildfire": `<ul>
  <li>Recent events: evacuations and property losses >$2 billion</li>
  <li>Widespread damage in urban areas</li>
</ul>`,
        "Alberta Wildfire": `<ul>
  <li>2016 season: burned millions of acres</li>
  <li>Significant regional damage</li>
</ul>`,
        "Tohoku": `<ul>
  <li>2011 earthquake/tsunami: magnitude 9.0</li>
  <li>Deaths: ~15,000; nuclear crisis triggered</li>
  <li>Long-term environmental and infrastructural challenges</li>
</ul>`,
        "Typhoon Haiyan": `<ul>
  <li>2013 event in the Philippines</li>
  <li>Deaths: >6,300; one of the strongest cyclones recorded</li>
  <li>Widespread destruction</li>
</ul>`
      };
      const placeCaseStudyFacts = {
        "Ground Zero": `<ul>
  <li>Site of 9/11 attacks; major redevelopment</li>
  <li>Significantly impacted New York's economic and cultural identity</li>
</ul>`,
        "Plymouth": `<ul>
  <li>Underwent substantial economic changes and urban regeneration</li>
  <li>Shift in population and employment trends</li>
</ul>`,
        "Detroit": `<ul>
  <li>Population decline of over 60% from peak</li>
  <li>Significant economic loss due to industrial decline; revitalisation efforts ongoing</li>
</ul>`,
        "London Olympics": `<ul>
  <li>2012 Olympics spurred major urban regeneration</li>
  <li>Boosted local economy and altered demographic patterns</li>
</ul>`,
        "Medellin": `<ul>
  <li>Transformation from violence to innovation-driven urban revival</li>
  <li>Enhanced urban design and economic growth</li>
</ul>`,
        "Bourneville": `<ul>
  <li>Industrial heritage from Cadburys</li>
  <li>Economic changes redefined community identity</li>
</ul>`,
        "Devonport": `<ul>
  <li>Shift in naval and industrial activity</li>
  <li>Notable demographic and economic changes</li>
</ul>`,
        "Stonehenge": `<ul>
  <li>Iconic monument driving tourism</li>
  <li>Major contributor to regional economic activity and identity</li>
</ul>`,
        "Glastonbury": `<ul>
  <li>Famous for cultural festivals and historical legacy</li>
  <li>Exemplifies the blend of heritage and modern economic trends</li>
</ul>`
      };
      // Helper functions to generate flashcards
      const generateConceptualFlashcards = (subtopic, topicType) => {
        let cards = [];
        if(topicType === "Hazards") {
          cards.push({
            id: 0,
            question: `Define and explain the significance of "${subtopic}".`,
            answer: `<ul>
  <li>Definition: ${subtopic} encompasses the key principles used to understand natural hazards.</li>
  <li>Significance: It aids in risk assessment, prediction, and disaster management.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Discuss the underlying processes of "${subtopic}".`,
            answer: `<ul>
  <li>Processes include tectonic activity, atmospheric dynamics, and erosion mechanisms.</li>
  <li>These processes determine the frequency and intensity of hazards.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Evaluate management strategies for "${subtopic}".`,
            answer: `<ul>
  <li>Immediate responses: emergency evacuations, rapid aid deployment.</li>
  <li>Long-term strategies: infrastructure upgrades, policy reforms, hazard modeling.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Explain how data analysis improves our understanding of "${subtopic}".`,
            answer: `<ul>
  <li>Use of GIS and big data enables detailed hazard mapping.</li>
  <li>Remote sensing and statistical analysis provide real-time insights.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `How do theoretical models guide responses to "${subtopic}"?`,
            answer: `<ul>
  <li>Models (e.g., Hazard Management Cycle) outline disaster response stages.</li>
  <li>They inform both policy and practical emergency planning.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Outline the formation processes of fold mountains in relation to "${subtopic}".`,
            answer: `<ul>
  <li>Converging tectonic plates compress and fold the crust.</li>
  <li>Uplift and differential erosion create characteristic mountain ranges.</li>
  <li>Examples include the Himalayas and the Andes.</li>
</ul>`,
            subtopic: subtopic
          });
        } else if(topicType === "Place") {
          cards.push({
            id: 0,
            question: `Define "${subtopic}" in a geographical context.`,
            answer: `<ul>
  <li>Definition: ${subtopic} examines the physical, cultural, and economic attributes of a location.</li>
  <li>It is fundamental to understanding place identity and evolution.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Discuss the main factors influencing "${subtopic}" in urban settings.`,
            answer: `<ul>
  <li>Key factors: economic trends, migration, infrastructure, and policy.</li>
  <li>These shape demographic and spatial changes in cities.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Examine the role of technology and big data in understanding "${subtopic}".`,
            answer: `<ul>
  <li>GIS and big data tools enable precise mapping of urban trends.</li>
  <li>They support data-driven urban planning and regeneration efforts.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Evaluate how oral narratives contribute to "${subtopic}".`,
            answer: `<ul>
  <li>Local narratives provide qualitative insights into community identity.</li>
  <li>They complement quantitative data, enriching our overall understanding.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `How do changes in economic indicators affect "${subtopic}"?`,
            answer: `<ul>
  <li>Indicators like income levels, employment rates, and investment directly influence urban form.</li>
  <li>They drive redevelopment and alter population patterns.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Discuss the challenges and benefits of urban regeneration in the context of "${subtopic}".`,
            answer: `<ul>
  <li>Benefits: boosted local economies, improved infrastructure.</li>
  <li>Challenges: risk of gentrification, displacement of residents.</li>
</ul>`,
            subtopic: subtopic
          });
        }
        return cards;
      };
      const generateCaseStudyFlashcards = (caseStudyName, topicType) => {
        let cards = [];
        if(topicType === "Hazards") {
          const facts = hazardsCaseStudyFacts[caseStudyName] || "";
          cards.push({
            id: 0,
            question: `Describe the key details of the "${caseStudyName}" case study.`,
            answer: `<ul>
  ${facts}
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Analyze the immediate and long-term responses for "${caseStudyName}".`,
            answer: `<ul>
  <li>Immediate: Emergency evacuations, international aid, rescue operations.</li>
  <li>Long-term: Infrastructure rebuilding, policy reforms, improved risk management.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Evaluate how "${caseStudyName}" influenced hazard management policies.`,
            answer: `<ul>
  <li>Prompted revisions in building codes and emergency planning.</li>
  <li>Led to increased investment in early warning and disaster preparedness systems.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Discuss the overall significance of the "${caseStudyName}" case study in understanding natural hazards.`,
            answer: `<ul>
  <li>Highlights the scale and complexity of hazard events.</li>
  <li>Provides statistical evidence that supports policy changes.</li>
  <li>Serves as a benchmark for future disaster management improvements.</li>
</ul>`,
            subtopic: caseStudyName
          });
        } else if(topicType === "Place") {
          const facts = placeCaseStudyFacts[caseStudyName] || "";
          cards.push({
            id: 0,
            question: `Outline the key economic and population statistics for "${caseStudyName}".`,
            answer: `<ul>
  ${facts}
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Discuss the impact of "${caseStudyName}" on local identity and regional development.`,
            answer: `<ul>
  <li>Major shifts in economic structure and population demographics.</li>
  <li>Urban regeneration initiatives transformed local identity and boosted tourism.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Analyze how historical events at "${caseStudyName}" have shaped its current profile.`,
            answer: `<ul>
  <li>Historical events led to major redevelopment and demographic changes.</li>
  <li>Economic data such as employment trends support these shifts.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Evaluate the role of policy and planning at "${caseStudyName}".`,
            answer: `<ul>
  <li>Local and national policies have guided redevelopment and economic recovery.</li>
  <li>Evidence-based planning using both quantitative and qualitative data has been crucial.</li>
</ul>`,
            subtopic: caseStudyName
          });
        }
        return cards;
      };
      // Generate all flashcards dynamically for each topic, both conceptual and case study
      React.useEffect(() => {
        let generatedFlashcards = [];
        let idCounter = 1;
        // Hazards: conceptual flashcards
        topicConfig.find(t => t.topic === "Hazards").conceptual.forEach(sub => {
          const cards = generateConceptualFlashcards(sub, "Hazards");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        // Hazards: case study flashcards
        topicConfig.find(t => t.topic === "Hazards").caseStudies.forEach(sub => {
          const cards = generateCaseStudyFlashcards(sub, "Hazards");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        // Place: conceptual flashcards
        topicConfig.find(t => t.topic === "Place").conceptual.forEach(sub => {
          const cards = generateConceptualFlashcards(sub, "Place");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        // Place: case study flashcards
        topicConfig.find(t => t.topic === "Place").caseStudies.forEach(sub => {
          const cards = generateCaseStudyFlashcards(sub, "Place");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        setFlashcards(generatedFlashcards);
        // Initialize stats for each flashcard
        const initialStats = {};
        generatedFlashcards.forEach(card => {
          initialStats[card.id] = {
            timesReviewed: 0,
            timesCorrect: 0,
            lastReviewed: null,
            nextReview: new Date()
          };
        });
        setCardStats(initialStats);
      }, []);
      // Filter flashcards based on search, topic, and subtopic selections
      React.useEffect(() => {
        let filtered = [...flashcards];
        if (searchTerm) {
          const term = searchTerm.toLowerCase();
          filtered = filtered.filter(card =>
            card.question.toLowerCase().includes(term) ||
            card.answer.toLowerCase().includes(term) ||
            (card.subtopic && card.subtopic.toLowerCase().includes(term))
          );
        }
        if (selectedTopic) {
          const config = topicConfig.find(item => item.topic === selectedTopic);
          if (config) {
            const allSubs = [...config.conceptual, ...config.caseStudies];
            filtered = filtered.filter(card => allSubs.includes(card.subtopic));
          }
        }
        if (selectedSubtopic.name) {
          filtered = filtered.filter(card => card.subtopic === selectedSubtopic.name);
        }
        setFilteredCards(filtered);
        if (filtered.length > 0) {
          setCurrentCardIndex(0);
          setShowAnswer(false);
        }
      }, [flashcards, searchTerm, selectedTopic, selectedSubtopic]);
      // Navigation functions
      const nextCard = () => {
        if (currentCardIndex < filteredCards.length - 1) {
          setCurrentCardIndex(currentCardIndex + 1);
          setShowAnswer(false);
        } else {
          setCurrentCardIndex(0);
          setShowAnswer(false);
        }
      };
      const prevCard = () => {
        if (currentCardIndex > 0) {
          setCurrentCardIndex(currentCardIndex - 1);
          setShowAnswer(false);
        }
      };
      const toggleAnswer = () => {
        setShowAnswer(!showAnswer);
        if (!showAnswer && filteredCards.length > 0) {
          const currentCard = filteredCards[currentCardIndex];
          const updatedStats = { ...cardStats };
          updatedStats[currentCard.id] = {
            ...updatedStats[currentCard.id],
            timesReviewed: (updatedStats[currentCard.id].timesReviewed || 0) + 1,
            // This continues from where the code was cut off
            lastReviewed: new Date(),
            nextReview: new Date(Date.now() + 24 * 60 * 60 * 1000) // Next review in 24 hours
          };
        }
      };
      
      // Mark card as correct or incorrect
      const markCard = (correct) => {
        if (filteredCards.length > 0) {
          const currentCard = filteredCards[currentCardIndex];
          const updatedStats = { ...cardStats };
          if (correct) {
            updatedStats[currentCard.id].timesCorrect = (updatedStats[currentCard.id].timesCorrect || 0) + 1;
          }
          setCardStats(updatedStats);
          nextCard();
        }
      };
      
      // Handle topic selection
      const handleTopicSelect = (topic) => {
        if (selectedTopic === topic) {
          // If clicking the already selected topic, deselect it
          setSelectedTopic(null);
          setSelectedSubtopic({ category: null, name: null });
        } else {
          setSelectedTopic(topic);
          setSelectedSubtopic({ category: null, name: null });
        }
      };
      
      // Handle subtopic selection
      const handleSubtopicSelect = (subtopic, category) => {
        if (selectedSubtopic.name === subtopic) {
          // If clicking the already selected subtopic, deselect it
          setSelectedSubtopic({ category: null, name: null });
        } else {
          setSelectedSubtopic({ category, name: subtopic });
        }
      };
      
      // Get current card
      const currentCard = filteredCards.length > 0 ? filteredCards[currentCardIndex] : null;
      
      return (
        <div>
          <h1>Geography Flashcards</h1>
          
          {/* Search bar */}
          <div style={{ margin: '20px 0' }}>
            <input
              type="text"
              placeholder="Search flashcards..."
              value={searchTerm}
              onChange={(e) => setSearchTerm(e.target.value)}
              style={{ 
                padding: '8px', 
                width: '100%', 
                maxWidth: '300px', 
                border: '2px solid #388e3c',
                borderRadius: '4px'
              }}
            />
          </div>
          
          {/* Topic buttons */}
          <div style={{ margin: '20px 0' }}>
            <h4 style={{ color: '#1b5e20', marginBottom: '8px' }}>Select Topic:</h4>
            {topicConfig.map((config) => (
              <button
                key={config.topic}
                className={`topic-button ${selectedTopic === config.topic ? 
                  (config.topic === 'Hazards' ? 'hazards-topic-active' : 'place-topic-active') : 
                  'topic-inactive'}`}
                onClick={() => handleTopicSelect(config.topic)}
              >
                {config.topic}
              </button>
            ))}
          </div>
          
          {/* Subtopic selection section - only show if a topic is selected */}
          {selectedTopic && (
            <div>
              {/* Conceptual subtopics */}
              <div className="subtopic-section">
                <h5>Conceptual Topics:</h5>
                {topicConfig.find(t => t.topic === selectedTopic).conceptual.map((sub) => (
                  <button
                    key={sub}
                    className={`subtopic-button ${selectedSubtopic.name === sub ? 
                      'conceptual-active' : 'conceptual-inactive'}`}
                    onClick={() => handleSubtopicSelect(sub, 'Conceptual')}
                  >
                    {sub}
                  </button>
                ))}
              </div>
              
              {/* Case studies subtopics */}
              <div className="subtopic-section">
                <h5>Case Studies:</h5>
                {topicConfig.find(t => t.topic === selectedTopic).caseStudies.map((sub) => (
                  <button
                    key={sub}
                    className={`subtopic-button ${selectedSubtopic.name === sub ? 
                      'casestudy-active' : 'casestudy-inactive'}`}
                    onClick={() => handleSubtopicSelect(sub, 'Case Study')}
                  >
                    {sub}
                  </button>
                ))}
              </div>
            </div>
          )}
          
          {/* Color legend */}
          <div className="legend">
            <div><span className="box hazards-active"></span> Hazards (Active)</div>
            <div><span className="box place-active"></span> Place (Active)</div>
            <div><span className="box inactive"></span> Inactive</div>
          </div>
          
          {/* Flashcard display */}
          {currentCard ? (
            <div 
              className="flashcard-container"
              onClick={toggleAnswer}
            >
              <div className="progress-indicator">
                Card {currentCardIndex + 1} of {filteredCards.length}
              </div>
              
              <div style={{ marginBottom: '16px', fontWeight: 'bold', fontSize: '1.1rem' }}>
                {currentCard.question}
              </div>
              
              {showAnswer && (
                <div 
                  className="answer"
                  dangerouslySetInnerHTML={{ __html: currentCard.answer }}
                />
              )}
              
              {!showAnswer && (
                <div style={{ 
                  textAlign: 'center', 
                  marginTop: '32px', 
                  color: '#757575',
                  fontStyle: 'italic'
                }}>
                  Click to reveal answer
                </div>
              )}
            </div>
          ) : (
            <div className="flashcard-container" style={{ justifyContent: 'center', alignItems: 'center' }}>
              <p>No flashcards match your current selection. Try changing your filters.</p>
            </div>
          )}
          
          {/* Navigation buttons */}
          <div style={{ 
            display: 'flex', 
            justifyContent: 'space-between', 
            margin: '16px 0',
            flexWrap: 'wrap',
            gap: '8px'
          }}>
            <button 
              onClick={prevCard}
              className="subtopic-button conceptual-active"
              disabled={currentCardIndex === 0 || filteredCards.length === 0}
              style={{ opacity: currentCardIndex === 0 || filteredCards.length === 0 ? 0.5 : 1 }}
            >
              Previous Card
            </button>
            
            {showAnswer && (
              <div>
                <button 
                  onClick={() => markCard(false)}
                  style={{ 
                    backgroundColor: '#e57373', 
                    color: 'white',
                    padding: '6px 12px',
                    border: 'none',
                    borderRadius: '4px',
                    marginRight: '8px',
                    cursor: 'pointer'
                  }}
                >
                  Need to Review
                </button>
                <button 
                  onClick={() => markCard(true)}
                  style={{ 
                    backgroundColor: '#81c784', 
                    color: 'white',
                    padding: '6px 12px',
                    border: 'none',
                    borderRadius: '4px',
                    cursor: 'pointer'
                  }}
                >
                  Got It!
                </button>
              </div>
            )}
            
            <button 
              onClick={nextCard}
              className="subtopic-button casestudy-active"
              disabled={currentCardIndex === filteredCards.length - 1 || filteredCards.length === 0}
              style={{ opacity: currentCardIndex === filteredCards.length - 1 || filteredCards.length === 0 ? 0.5 : 1 }}
            >
              Next Card
            </button>
          </div>
          
          {/* Exam tips section */}
          <div style={{
            margin: '32px 0',
            padding: '16px',
            backgroundColor: '#e8f5e9',
            borderRadius: '8px',
            border: '2px solid #388e3c'
          }}>
            <h3 style={{ color: '#1b5e20', marginBottom: '8px' }}>Exam Tips</h3>
            <ul>
              <li>For hazard questions, always include specific case study data like VEI, casualty numbers, and economic costs.</li>
              <li>When discussing place, contrast insider/outsider perspectives and mention demographic statistics.</li>
              <li>Include at least 3 specific case studies in your hazards essays.</li>
              <li>Make sure to link theoretical concepts to real-world examples in place-based questions.</li>
              <li>Use precise terminology appropriate to each topic (e.g., VEI for volcanoes, urban regeneration for place).</li>
            </ul>
          </div>
          
          {/* Statistics button */}
          <div style={{ textAlign: 'center', margin: '16px 0' }}>
            <button 
              onClick={() => setShowStats(!showStats)}
              style={{
                backgroundColor: '#4caf50',
                color: 'white',
                padding: '8px 16px',
                border: 'none',
                borderRadius: '4px',
                cursor: 'pointer'
              }}
            >
              {showStats ? 'Hide Stats' : 'Show Review Statistics'}
            </button>
          </div>
          
          {/* Statistics display */}
          {showStats && (
            <div style={{
              margin: '16px 0',
              padding: '16px',
              backgroundColor: '#f1f8e9',
              borderRadius: '8px',
              border: '2px solid #388e3c'
            }}>
              <h3 style={{ color: '#1b5e20', marginBottom: '8px' }}>Your Review Statistics</h3>
              <p>Total cards: {flashcards.length}</p>
              <p>Cards reviewed: {Object.values(cardStats).filter(stat => stat.timesReviewed > 0).length}</p>
              <p>Mastered cards (correct ≥ 3 times): {
                Object.values(cardStats).filter(stat => stat.timesCorrect >= 3).length
              }</p>
            </div>
          )}
        </div>
      );
    };
    
    // Render the app
    const rootElement = document.getElementById('app-container');
    const root = ReactDOM.createRoot(rootElement);
    root.render(<GeographyFlashcardApp />);
    
    // Mobile navigation menu toggle
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.querySelector('.menu-toggle');
      const navMenu = document.querySelector('.nav-menu');
      
      menuToggle.addEventListener('click', function() {
        navMenu.classList.toggle('active');
      });
    });
  </script>
</body>
</html>