<!DOCTYPE html>
<html>
<head>
  <link rel="icon" type="image/x-icon" href="./Miscellaneous/Main Favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary: #2e7d32;
      --primary-dark: #1b5e20;
      --primary-light: #81c784;
      --secondary: #388e3c;
      --accent: #66bb6a;
      --dark: #1a2e1a;
      --light: #f8f9fa;
      --success: #4caf50;
      --warning: #ffa000;
      --danger: #d32f2f;
      --gray: #616161;
      --gray-light: #e8f5e9;
      --border-radius: 12px;
      --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    /* Global styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background-color: #f0f8f0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      line-height: 1.6;
    }
    
    /* Navigation styles (unchanged) */
    .nav-container {
      background-color: var(--primary-dark);
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      position: relative;
    }
    
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    
    .logo img {
      width: 42px;
      height: 38px;
      vertical-align: middle;
    }
    
    .nav-menu {
      list-style-type: none;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      margin-left: 0;
      width: 100%;
      justify-content: flex-start;
    }
    
    .nav-menu li {
      flex: 0 0 auto;
    }
    
    .nav-menu li a {
      display: block;
      color: white;
      text-align: center;
      padding: 20px 16px;
      text-decoration: none;
      white-space: nowrap;
      transition: background-color 0.2s;
    }
    
    .nav-menu li a:hover {
      background-color: var(--primary);
    }
    
    .menu-toggle {
      display: none;
      color: white;
      background: none;
      border: none;
      font-size: 24px;
      padding: 12px 16px;
      cursor: pointer;
      margin-left: auto;
    }
    
    /* Main app container */
    #app-container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 20px;
    }
    
    /* Header */
    .app-header {
      text-align: center;
      margin-bottom: 30px;
      animation: fadeInDown 0.6s ease-out;
    }
    
    .app-title {
      font-size: 2.2rem;
      font-weight: 700;
      color: var(--primary-dark);
      margin-bottom: 8px;
    }
    
    .app-subtitle {
      font-size: 1rem;
      color: var(--dark);
      opacity: 0.8;
    }
    
    /* Main layout */
    .app-layout {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 24px;
    }
    
    /* Sidebar */
    .sidebar {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 20px;
      border: 1px solid var(--gray-light);
      height: fit-content;
      position: sticky;
      top: 20px;
      animation: slideInLeft 0.5s ease-out;
    }
    
    .sidebar-section {
      margin-bottom: 24px;
    }
    
    .sidebar-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
    }
    
    .sidebar-title i {
      margin-right: 10px;
      color: var(--primary);
    }
    
    /* Search */
    .search-container {
      position: relative;
      margin-bottom: 20px;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 16px 12px 40px;
      border: 1px solid var(--gray-light);
      border-radius: var(--border-radius);
      font-size: 0.95rem;
      transition: var(--transition);
      background-color: var(--light);
    }
    
    .search-input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
    }
    
    .search-icon {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gray);
    }
    
    /* Topic selection */
    .topic-selector {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .topic-btn {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background-color: white;
      border: 1px solid var(--gray-light);
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
    }
    
    .topic-btn:hover {
      border-color: var(--primary-light);
      background-color: var(--gray-light);
    }
    
    .topic-btn.active {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }
    
    .topic-btn i {
      transition: transform 0.3s ease;
    }
    
    .topic-btn.active i {
      transform: rotate(90deg);
    }
    
    /* Subtopic selection */
    .subtopic-list {
      margin-top: 8px;
      padding-left: 24px;
      display: none;
      animation: fadeIn 0.3s ease-out;
    }
    
    .subtopic-list.show {
      display: block;
    }
    
    .subtopic-item {
      display: flex;
      align-items: center;
      padding: 8px 12px;
      margin-bottom: 4px;
      border-radius: 6px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .subtopic-item:hover {
      background-color: var(--gray-light);
    }
    
    .subtopic-item.active {
      background-color: var(--primary-light);
      color: white;
    }
    
    .subtopic-item .bookmark-btn {
      margin-left: auto;
      color: var(--gray);
      cursor: pointer;
      transition: var(--transition);
    }
    
    .subtopic-item.active .bookmark-btn,
    .subtopic-item .bookmark-btn.active {
      color: var(--warning);
    }
    
    .subtopic-item .bookmark-btn:hover {
      transform: scale(1.1);
    }
    
    /* Flashcard container */
    .flashcard-view {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: var(--box-shadow);
      padding: 30px;
      min-height: 400px;
      display: flex;
      flex-direction: column;
      border: 1px solid var(--gray-light);
      animation: fadeIn 0.5s ease-out;
    }
    
    .flashcard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    
    .flashcard-progress {
      font-size: 0.9rem;
      color: var(--gray);
      font-weight: 500;
    }
    
    .flashcard-actions {
      display: flex;
      gap: 10px;
    }
    
    .action-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--gray-light);
      color: var(--gray);
      cursor: pointer;
      transition: var(--transition);
      border: none;
    }
    
    .action-btn:hover {
      background-color: var(--primary-light);
      color: white;
    }
    
    .action-btn.active {
      background-color: var(--primary);
      color: white;
    }
    
    .action-btn.bookmarked {
      background-color: var(--warning);
      color: white;
    }
    
    /* Flashcard content */
    .flashcard-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      perspective: 1000px;
      position: relative;
    }
    
    .flashcard {
      background-color: white;
      border-radius: var(--border-radius);
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      transition: var(--transition);
      border: 1px solid var(--gray-light);
      transform-style: preserve-3d;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      position: relative;
    }
    
    .flashcard.flipping {
      animation: flipCard 0.6s ease-out forwards;
    }
    
    .flashcard-subtopic {
      font-size: 0.9rem;
      color: var(--primary);
      margin-bottom: 12px;
      font-weight: 500;
      display: flex;
      align-items: center;
    }
    
    .flashcard-subtopic i {
      margin-right: 8px;
    }
    
    .flashcard-question, .flashcard-answer {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    
    .flashcard-question h3 {
      font-size: 1.3rem;
      color: var(--primary-dark);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    
    .flashcard-question h3 i {
      margin-right: 12px;
      color: var(--primary);
    }
    
    .flashcard-question p {
      font-size: 1.1rem;
      color: var(--dark);
      line-height: 1.7;
    }
    
    .flashcard-answer h3 {
      font-size: 1.3rem;
      color: var(--primary-dark);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    
    .flashcard-answer h3 i {
      margin-right: 12px;
      color: var(--success);
    }
    
    .flashcard-answer-content {
      font-size: 1.1rem;
      color: var(--dark);
      line-height: 1.7;
    }
    
    .flashcard-answer-content ul {
      list-style-type: disc;
      padding-left: 20px;
    }
    
    .flashcard-answer-content li {
      margin-bottom: 8px;
    }
    
    .flashcard-instruction {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9rem;
      color: var(--gray);
      font-weight: 500;
    }
    
    /* Navigation buttons */
    .flashcard-nav {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
    }
    
    .nav-btn {
      padding: 12px 24px;
      border-radius: var(--border-radius);
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      border: none;
    }
    
    .nav-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .nav-btn.prev {
      background-color: var(--gray-light);
      color: var(--gray);
    }
    
    .nav-btn.prev:hover:not(:disabled) {
      background-color: #e0e0e0;
    }
    
    .nav-btn.next {
      background-color: var(--primary);
      color: white;
    }
    
    .nav-btn.next:hover:not(:disabled) {
      background-color: var(--primary-dark);
    }
    
    .nav-btn i {
      margin-right: 8px;
    }
    
    /* Empty state */
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      animation: fadeIn 0.5s ease-out;
    }
    
    .empty-state i {
      font-size: 3rem;
      color: var(--gray-light);
      margin-bottom: 20px;
    }
    
    .empty-state h3 {
      font-size: 1.3rem;
      color: var(--gray);
      margin-bottom: 10px;
    }
    
    .empty-state p {
      color: var(--gray);
      margin-bottom: 20px;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes fadeInDown {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideInLeft {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    @keyframes flipCard {
      0% { transform: rotateY(0); }
      50% { transform: rotateY(90deg); }
      100% { transform: rotateY(0); }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 1.5s infinite;
    }
    
    /* Responsive styles */
    @media screen and (max-width: 992px) {
      .app-layout {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        position: static;
        margin-bottom: 20px;
      }
    }
    
    @media screen and (max-width: 768px) {
      .app-header {
        margin-bottom: 20px;
      }
      
      .app-title {
        font-size: 1.8rem;
      }
      
      .flashcard-view {
        padding: 20px;
      }
      
      .flashcard-question h3,
      .flashcard-answer h3 {
        font-size: 1.2rem;
      }
      
      .flashcard-question p,
      .flashcard-answer-content {
        font-size: 1rem;
      }
    }
    
    @media screen and (max-width: 576px) {
      .nav-btn {
        padding: 10px 16px;
        font-size: 0.9rem;
      }
      
      .flashcard-nav {
        flex-direction: column;
        gap: 10px;
      }
      
      .nav-btn {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
  <title>GeoMaster Pro | Geography Flashcards</title>
  <!-- React and ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <!-- Navigation with hamburger menu for tablets and mobile -->
  <div class="nav-container">
    <a href="index.html" class="logo">
      <img src="Logo.png" alt="Logo">
    </a>
    <button class="menu-toggle" aria-label="Toggle navigation menu">☰</button>
    <ul class="nav-menu">
      <li><a href="PR.html">GCSE Past Papers</a></li>
      <li><a href="APR.html">A Level Papers</a></li>
      <li><a href="SPBE.html">Geography Flashcards</a></li>
      <li><a href="BWT.html">Case Studies</a></li>
    </ul>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.querySelector('.menu-toggle');
      const navMenu = document.querySelector('.nav-menu');

      // Simply toggle the active class on click
      menuToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        navMenu.classList.toggle('active');
      });

      // Close menu when clicking outside
      document.addEventListener('click', function(event) {
        if (navMenu.classList.contains('active') &&
            !navMenu.contains(event.target) &&
            !menuToggle.contains(event.target)) {
          navMenu.classList.remove('active');
        }
      });

      // Handle window resize
      window.addEventListener('resize', function() {
        if (window.innerWidth > 1100) {
          navMenu.classList.remove('active');
        }
      });
    });
  </script>
  
  <!-- React App Container -->
  <div id="app-container"></div>
  
  <!-- React Component -->
  <script type="text/babel">
    const GeographyFlashcardApp = () => {
      // State declarations
      const [flashcards, setFlashcards] = React.useState([]);
      const [filteredCards, setFilteredCards] = React.useState([]);
      const [currentCardIndex, setCurrentCardIndex] = React.useState(0);
      const [showAnswer, setShowAnswer] = React.useState(false);
      const [isFlipping, setIsFlipping] = React.useState(false);
      const [searchTerm, setSearchTerm] = React.useState('');
      const [selectedTopic, setSelectedTopic] = React.useState(null);
      const [selectedSubtopic, setSelectedSubtopic] = React.useState(null);
      const [expandedTopic, setExpandedTopic] = React.useState(null);
      const [bookmarkedCards, setBookmarkedCards] = React.useState([]);
      const [bookmarkedTopics, setBookmarkedTopics] = React.useState([]);
      
      // Load saved data from localStorage
      React.useEffect(() => {
        const savedBookmarkedCards = localStorage.getItem('bookmarkedCards');
        const savedBookmarkedTopics = localStorage.getItem('bookmarkedTopics');
        
        if (savedBookmarkedCards) {
          setBookmarkedCards(JSON.parse(savedBookmarkedCards));
        }
        
        if (savedBookmarkedTopics) {
          setBookmarkedTopics(JSON.parse(savedBookmarkedTopics));
        }
      }, []);
      
      // Save bookmarks to localStorage when they change
      React.useEffect(() => {
        localStorage.setItem('bookmarkedCards', JSON.stringify(bookmarkedCards));
        localStorage.setItem('bookmarkedTopics', JSON.stringify(bookmarkedTopics));
      }, [bookmarkedCards, bookmarkedTopics]);
      
      // Topic configuration
      const topicConfig = [
        {
          id: 'hazards',
          name: 'Hazards',
          icon: 'fa-mountain',
          subtopics: [
            { id: 'hazards-conceptual', name: 'Conceptual', icon: 'fa-brain', type: 'conceptual' },
            { id: 'hazards-case-studies', name: 'Case Studies', icon: 'fa-map-marked-alt', type: 'caseStudies' }
          ]
        },
        {
          id: 'place',
          name: 'Place',
          icon: 'fa-globe-europe',
          subtopics: [
            { id: 'place-conceptual', name: 'Conceptual', icon: 'fa-brain', type: 'conceptual' },
            { id: 'place-case-studies', name: 'Case Studies', icon: 'fa-map-marked-alt', type: 'caseStudies' }
          ]
        }
      ];
      
      // Detailed subtopics
      const subtopicDetails = {
        'hazards-conceptual': [
          "Concept of Hazard in Geography",
          "Plate Tectonics and Hazards",
          "Volcanic Hazards",
          "Seismic Hazards",
          "Storm Hazards",
          "Wildfire Hazards",
          "Multi-Hazard Environments",
          "Risk Management & Resilience",
          "Fold Mountains Formation",
          "Rift Valleys & Ocean Ridges"
        ],
        'hazards-case-studies': [
          "Mt Etna",
          "Mt Merapi",
          "Eyjafjallajökull",
          "Montserrat",
          "Yellowstone",
          "Boxing Day Tsunami",
          "Haiti",
          "Cyclone Nargis",
          "Hurricane Katrina",
          "LA Wildfire",
          "Alberta Wildfire",
          "Tohoku",
          "Typhoon Haiyan"
        ],
        'place-conceptual': [
          "Concept of Place & Identity",
          "Insider vs Outsider Perspectives",
          "Economic Change & Population Trends",
          "Urbanisation & Migration",
          "Sustainable Urban Development",
          "Big Data & GIS in Geography",
          "Oral Data & Local Narratives",
          "Spatial Patterns & Land Use",
          "Cultural & Social Change"
        ],
        'place-case-studies': [
          "Ground Zero",
          "Plymouth",
          "Detroit",
          "London Olympics",
          "Medellin",
          "Bourneville",
          "Devonport",
          "Stonehenge",
          "Glastonbury"
        ]
      };
      
      // Case study facts
      const caseStudyFacts = {
        "Mt Etna": `<ul>
          <li>VEI: 2-3</li>
          <li>2021 eruption: ash plume up to 3 km high</li>
          <li>Casualties: minimal due to monitoring</li>
        </ul>`,
        "Mt Merapi": `<ul>
          <li>2010 eruption: VEI 4</li>
          <li>Deaths: ~353</li>
          <li>Injuries: >1,000; significant infrastructure damage</li>
        </ul>`,
        "Eyjafjallajökull": `<ul>
          <li>2010 eruption: VEI 4</li>
          <li>Ash cloud: reached 9 km high, disrupted European air travel for 6 days</li>
          <li>Direct casualties: minimal</li>
        </ul>`,
        "Montserrat": `<ul>
          <li>Active since 1995</li>
          <li>Evacuation: ~2/3 of population</li>
          <li>Long-term socio-economic impact</li>
        </ul>`,
        "Yellowstone": `<ul>
          <li>Supervolcano; last major eruption: >600,000 years ago</li>
          <li>Potential eruption: VEI 8; catastrophic global impact</li>
        </ul>`,
        "Boxing Day Tsunami": `<ul>
          <li>Triggered by 9.1-9.3 magnitude earthquake in 2004</li>
          <li>Deaths: ~230,000</li>
          <li>Massive infrastructural damage</li>
        </ul>`,
        "Haiti": `<ul>
          <li>2010 earthquake: magnitude 7.0</li>
          <li>Deaths: >230,000; Injuries: ~300,000</li>
          <li>Damage: $8-14 billion</li>
        </ul>`,
        "Cyclone Nargis": `<ul>
          <li>2008 event in Myanmar</li>
          <li>Deaths: ~138,000; Millions displaced</li>
          <li>Severe infrastructure damage</li>
        </ul>`,
        "Hurricane Katrina": `<ul>
          <li>2005 event: ~1,833 deaths</li>
          <li>Displacement: >250,000 people</li>
          <li>Damage: >$125 billion</li>
        </ul>`,
        "LA Wildfire": `<ul>
          <li>Recent events: evacuations and property losses >$2 billion</li>
          <li>Widespread damage in urban areas</li>
        </ul>`,
        "Alberta Wildfire": `<ul>
          <li>2016 season: burned millions of acres</li>
          <li>Significant regional damage</li>
        </ul>`,
        "Tohoku": `<ul>
          <li>2011 earthquake/tsunami: magnitude 9.0</li>
          <li>Deaths: ~15,000; nuclear crisis triggered</li>
          <li>Long-term environmental and infrastructural challenges</li>
        </ul>`,
        "Typhoon Haiyan": `<ul>
          <li>2013 event in the Philippines</li>
          <li>Deaths: >6,300; one of the strongest cyclones recorded</li>
          <li>Widespread destruction</li>
        </ul>`,
        "Ground Zero": `<ul>
          <li>Site of 9/11 attacks; major redevelopment</li>
          <li>Significantly impacted New York's economic and cultural identity</li>
        </ul>`,
        "Plymouth": `<ul>
          <li>Underwent substantial economic changes and urban regeneration</li>
          <li>Shift in population and employment trends</li>
        </ul>`,
        "Detroit": `<ul>
          <li>Population decline of over 60% from peak</li>
          <li>Significant economic loss due to industrial decline; revitalisation efforts ongoing</li>
        </ul>`,
        "London Olympics": `<ul>
          <li>2012 Olympics spurred major urban regeneration</li>
          <li>Boosted local economy and altered demographic patterns</li>
        </ul>`,
        "Medellin": `<ul>
          <li>Transformation from violence to innovation-driven urban revival</li>
          <li>Enhanced urban design and economic growth</li>
        </ul>`,
        "Bourneville": `<ul>
          <li>Industrial heritage from Cadburys</li>
          <li>Economic changes redefined community identity</li>
        </ul>`,
        "Devonport": `<ul>
          <li>Shift in naval and industrial activity</li>
          <li>Notable demographic and economic changes</li>
        </ul>`,
        "Stonehenge": `<ul>
          <li>Iconic monument driving tourism</li>
          <li>Major contributor to regional economic activity and identity</li>
        </ul>`,
        "Glastonbury": `<ul>
          <li>Famous for cultural festivals and historical legacy</li>
          <li>Exemplifies the blend of heritage and modern economic trends</li>
        </ul>`
      };
      
      // Generate flashcards
      const generateFlashcards = () => {
        let generatedFlashcards = [];
        let idCounter = 1;
        
        // Generate conceptual flashcards
        const generateConceptualCards = (topic, subtopic, items) => {
          return items.map(item => {
            const cards = [];
            
            // Question types for conceptual topics
            cards.push({
              id: idCounter++,
              question: `Define and explain the significance of "${item}".`,
              answer: `<ul>
                <li>Definition: ${item} encompasses the key principles used to understand ${topic.toLowerCase()}.</li>
                <li>Significance: It aids in analysis, prediction, and management strategies.</li>
              </ul>`,
              topic,
              subtopic: item,
              type: 'conceptual'
            });
            
            cards.push({
              id: idCounter++,
              question: `Discuss the underlying processes of "${item}".`,
              answer: `<ul>
                <li>Processes include various mechanisms that determine outcomes.</li>
                <li>These processes are fundamental to understanding patterns and impacts.</li>
              </ul>`,
              topic,
              subtopic: item,
              type: 'conceptual'
            });
            
            return cards;
          }).flat();
        };
        
        // Generate case study flashcards
        const generateCaseStudyCards = (topic, subtopic, items) => {
          return items.map(item => {
            const facts = caseStudyFacts[item] || "";
            
            return {
              id: idCounter++,
              question: `Describe the key details of the "${item}" case study.`,
              answer: `<ul>${facts}</ul>`,
              topic,
              subtopic: item,
              type: 'caseStudy'
            };
          });
        };
        
        // Generate all flashcards
        topicConfig.forEach(topic => {
          topic.subtopics.forEach(subtopic => {
            const items = subtopicDetails[subtopic.id] || [];
            
            if (subtopic.type === 'conceptual') {
              generatedFlashcards.push(...generateConceptualCards(topic.name, subtopic.name, items));
            } else {
              generatedFlashcards.push(...generateCaseStudyCards(topic.name, subtopic.name, items));
            }
          });
        });
        
        setFlashcards(generatedFlashcards);
        setFilteredCards(generatedFlashcards);
      };
      
      // Initialize flashcards
      React.useEffect(() => {
        generateFlashcards();
      }, []);
      
      // Filter flashcards based on selections
      React.useEffect(() => {
        let filtered = [...flashcards];
        
        // Filter by search term
        if (searchTerm) {
          const term = searchTerm.toLowerCase();
          filtered = filtered.filter(card =>
            card.question.toLowerCase().includes(term) ||
            card.answer.toLowerCase().includes(term) ||
            card.subtopic.toLowerCase().includes(term)
          );
        }
        
        // Filter by topic
        if (selectedTopic) {
          filtered = filtered.filter(card => card.topic === selectedTopic);
        }
        
        // Filter by subtopic
        if (selectedSubtopic) {
          filtered = filtered.filter(card => card.subtopic === selectedSubtopic);
        }
        
        // Filter by bookmarks if showing bookmarked cards
        if (showBookmarkedCards) {
          filtered = filtered.filter(card => bookmarkedCards.includes(card.id));
        }
        
        setFilteredCards(filtered);
        setCurrentCardIndex(0);
        setShowAnswer(false);
      }, [flashcards, searchTerm, selectedTopic, selectedSubtopic, showBookmarkedCards, bookmarkedCards]);
      
      // Toggle topic expansion
      const toggleTopic = (topicId) => {
        setExpandedTopic(expandedTopic === topicId ? null : topicId);
      };
      
      // Select a topic
      const selectTopic = (topicName) => {
        setSelectedTopic(selectedTopic === topicName ? null : topicName);
        setSelectedSubtopic(null);
      };
      
      // Select a subtopic
      const selectSubtopic = (subtopicName) => {
        setSelectedSubtopic(selectedSubtopic === subtopicName ? null : subtopicName);
      };
      
      // Toggle bookmark for a card
      const toggleCardBookmark = (cardId) => {
        if (bookmarkedCards.includes(cardId)) {
          setBookmarkedCards(bookmarkedCards.filter(id => id !== cardId));
        } else {
          setBookmarkedCards([...bookmarkedCards, cardId]);
        }
      };
      
      // Toggle bookmark for a topic
      const toggleTopicBookmark = (topicId) => {
        if (bookmarkedTopics.includes(topicId)) {
          setBookmarkedTopics(bookmarkedTopics.filter(id => id !== topicId));
        } else {
          setBookmarkedTopics([...bookmarkedTopics, topicId]);
        }
      };
      
      // Toggle bookmark for a subtopic
      const toggleSubtopicBookmark = (subtopicId) => {
        if (bookmarkedTopics.includes(subtopicId)) {
          setBookmarkedTopics(bookmarkedTopics.filter(id => id !== subtopicId));
        } else {
          setBookmarkedTopics([...bookmarkedTopics, subtopicId]);
        }
      };
      
      // Check if a card is bookmarked
      const isCardBookmarked = (cardId) => {
        return bookmarkedCards.includes(cardId);
      };
      
      // Check if a topic/subtopic is bookmarked
      const isTopicBookmarked = (topicId) => {
        return bookmarkedTopics.includes(topicId);
      };
      
      // Navigate to next card
      const nextCard = () => {
        if (filteredCards.length === 0) return;
        
        setIsFlipping(true);
        setTimeout(() => {
          setCurrentCardIndex(prev => 
            prev < filteredCards.length - 1 ? prev + 1 : 0
          );
          setShowAnswer(false);
          setIsFlipping(false);
        }, 300);
      };
      
      // Navigate to previous card
      const prevCard = () => {
        if (filteredCards.length === 0 || currentCardIndex === 0) return;
        
        setIsFlipping(true);
        setTimeout(() => {
          setCurrentCardIndex(prev => prev - 1);
          setShowAnswer(false);
          setIsFlipping(false);
        }, 300);
      };
      
      // Toggle answer visibility
      const toggleAnswer = () => {
        if (isFlipping || filteredCards.length === 0) return;
        
        setIsFlipping(true);
        setTimeout(() => {
          setShowAnswer(!showAnswer);
          setIsFlipping(false);
        }, 150);
      };
      
      // Show all cards
      const showAllCards = () => {
        setSelectedTopic(null);
        setSelectedSubtopic(null);
        setSearchTerm('');
      };
      
      // Show bookmarked cards
      const [showBookmarkedCards, setShowBookmarkedCards] = React.useState(false);
      
      const toggleBookmarkedCards = () => {
        setShowBookmarkedCards(!showBookmarkedCards);
      };
      
      return (
        <div id="app-container">
          <div class="app-header">
            <h1 class="app-title">GeoMaster Pro</h1>
            <p class="app-subtitle">Premium Geography Flashcards for A-Level Students</p>
          </div>
          
          <div class="app-layout">
            <div class="sidebar">
              <div class="sidebar-section">
                <div class="search-container">
                  <i class="fas fa-search search-icon"></i>
                  <input
                    type="text"
                    class="search-input"
                    placeholder="Search flashcards..."
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                  />
                </div>
              </div>
              
              <div class="sidebar-section">
                <div class="sidebar-title">
                  <i class="fas fa-layer-group"></i>
                  Topics
                </div>
                
                <div class="topic-selector">
                  <button
                    class={`topic-btn ${showBookmarkedCards ? 'active' : ''}`}
                    onClick={toggleBookmarkedCards}
                  >
                    <span>
                      <i class="fas fa-bookmark" style={{ marginRight: '8px' }}></i>
                      Bookmarked Cards
                    </span>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  
                  <button
                    class={`topic-btn ${!selectedTopic && !showBookmarkedCards ? 'active' : ''}`}
                    onClick={showAllCards}
                  >
                    <span>
                      <i class="fas fa-globe" style={{ marginRight: '8px' }}></i>
                      All Topics
                    </span>
                    <i class="fas fa-chevron-right"></i>
                  </button>
                  
                  {topicConfig.map(topic => (
                    <React.Fragment key={topic.id}>
                      <button
                        class={`topic-btn ${selectedTopic === topic.name ? 'active' : ''}`}
                        onClick={() => selectTopic(topic.name)}
                      >
                        <span>
                          <i class={`fas ${topic.icon}`} style={{ marginRight: '8px' }}></i>
                          {topic.name}
                        </span>
                        <i class={`fas fa-chevron-right ${expandedTopic === topic.id ? 'active' : ''}`}></i>
                      </button>
                      
                      {selectedTopic === topic.name && (
                        <div class="subtopic-list show">
                          {topic.subtopics.map(subtopic => (
                            <div
                              key={subtopic.id}
                              class={`subtopic-item ${selectedSubtopic && subtopicDetails[subtopic.id].includes(selectedSubtopic) ? 'active' : ''}`}
                              onClick={() => selectSubtopic(subtopic.name)}
                            >
                              <i class={`fas ${subtopic.icon}`} style={{ marginRight: '8px' }}></i>
                              {subtopic.name}
                              <i
                                class={`fas fa-bookmark bookmark-btn ${isTopicBookmarked(subtopic.id) ? 'active' : ''}`}
                                onClick={(e) => {
                                  e.stopPropagation();
                                  toggleSubtopicBookmark(subtopic.id);
                                }}
                              ></i>
                            </div>
                          ))}
                          
                          {subtopicDetails[`${topic.id}-${selectedTopic === 'Hazards' ? 'case-studies' : 'case-studies'}`] && (
                            <>
                              {selectedSubtopic && subtopicDetails[`${topic.id}-case-studies`].includes(selectedSubtopic) && (
                                <div class="subtopic-list show">
                                  {subtopicDetails[`${topic.id}-case-studies`].map(item => (
                                    <div
                                      key={item}
                                      class={`subtopic-item ${selectedSubtopic === item ? 'active' : ''}`}
                                      onClick={() => selectSubtopic(item)}
                                    >
                                      <i class="fas fa-map-marker-alt" style={{ marginRight: '8px' }}></i>
                                      {item}
                                    </div>
                                  ))}
                                </div>
                              )}
                            </>
                          )}
                        </div>
                      )}
                    </React.Fragment>
                  ))}
                </div>
              </div>
            </div>
            
            <div class="flashcard-view">
              {filteredCards.length > 0 ? (
                <>
                  <div class="flashcard-header">
                    <div class="flashcard-progress">
                      Card {currentCardIndex + 1} of {filteredCards.length}
                    </div>
                    <div class="flashcard-actions">
                      <button
                        class={`action-btn ${isCardBookmarked(filteredCards[currentCardIndex].id) ? 'bookmarked' : ''}`}
                        onClick={() => toggleCardBookmark(filteredCards[currentCardIndex].id)}
                        title="Bookmark this card"
                      >
                        <i class="fas fa-bookmark"></i>
                      </button>
                    </div>
                  </div>
                  
                  <div class="flashcard-content" onClick={toggleAnswer}>
                    <div class={`flashcard ${isFlipping ? 'flipping' : ''}`}>
                      <div class="flashcard-subtopic">
                        <i class={`fas ${filteredCards[currentCardIndex].type === 'conceptual' ? 'fa-brain' : 'fa-map-marked-alt'}`}></i>
                        {filteredCards[currentCardIndex].subtopic}
                      </div>
                      
                      {!showAnswer ? (
                        <div class="flashcard-question">
                          <h3>
                            <i class="fas fa-question-circle"></i>
                            Question
                          </h3>
                          <p>{filteredCards[currentCardIndex].question}</p>
                        </div>
                      ) : (
                        <div class="flashcard-answer">
                          <h3>
                            <i class="fas fa-lightbulb"></i>
                            Answer
                          </h3>
                          <div 
                            class="flashcard-answer-content"
                            dangerouslySetInnerHTML={{ __html: filteredCards[currentCardIndex].answer }}
                          ></div>
                        </div>
                      )}
                    </div>
                    
                    <div class="flashcard-instruction">
                      {!showAnswer ? 'Click to reveal answer' : 'Click to hide answer'}
                    </div>
                  </div>
                  
                  <div class="flashcard-nav">
                    <button 
                      class="nav-btn prev"
                      onClick={prevCard}
                      disabled={currentCardIndex === 0}
                    >
                      <i class="fas fa-arrow-left"></i>
                      Previous
                    </button>
                    <button 
                      class="nav-btn next"
                      onClick={nextCard}
                    >
                      Next
                      <i class="fas fa-arrow-right"></i>
                    </button>
                  </div>
                </>
              ) : (
                <div class="empty-state">
                  <i class="fas fa-map"></i>
                  <h3>No flashcards found</h3>
                  <p>Try changing your search or selection criteria</p>
                  <button 
                    class="nav-btn next"
                    onClick={showAllCards}
                  >
                    <i class="fas fa-globe"></i>
                    Show All Flashcards
                  </button>
                </div>
              )}
            </div>
          </div>
        </div>
      );
    };
    
    ReactDOM.render(
      <GeographyFlashcardApp />,
      document.getElementById('app-container')
    );
  </script>
</body>
</html>