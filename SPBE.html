<!DOCTYPE html>
<html>
<head>
  <link rel="icon" type="image/x-icon" href="./Miscellaneous/Main Favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    :root {
      --primary: #2e7d32;
      --primary-dark: #1b5e20;
      --secondary: #388e3c;
      --accent: #66bb6a;
      --dark: #1a2e1a;
      --light: #f8f9fa;
      --success: #4caf50;
      --warning: #ffa000;
      --danger: #d32f2f;
      --gray: #616161;
      --gray-light: #e8f5e9;
      --border-radius: 8px;
      --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    /* Global styles */
    body {
      background-color: #f0f8f0;
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    
    h1, p {
      text-indent: 25px;
    }
    
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #333;
    }
    
    li {
      float: left;
    }
    
    li a {
      display: block;
      color: white;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
    }
    
    #app-container {
      margin: 20px;
    }
    
    /* Legend for colours */
    .legend {
      margin: 10px 0;
      padding: 15px;
      background-color: #e8f5e9;
      border: 2px solid var(--primary);
      border-radius: var(--border-radius);
      font-size: 0.9rem;
      color: var(--dark);
      box-shadow: var(--box-shadow);
      animation: fadeIn 0.5s ease-out;
    }
    
    .legend span.box {
      display: inline-block;
      width: 16px;
      height: 16px;
      margin-right: 8px;
      vertical-align: middle;
      border: 1px solid #000;
      border-radius: 3px;
    }
    
    .legend .hazards-active { background-color: var(--primary); }
    .legend .place-active { background-color: #1565c0; }
    .legend .inactive { background-color: #757575; }
    
    /* Subtopic buttons */
    .subtopic-section {
      margin-bottom: 16px;
      animation: slideUp 0.4s ease-out;
    }
    
    .subtopic-section h5 {
      margin: 8px 0 4px;
      color: var(--primary-dark);
      font-weight: 600;
    }
    
    .subtopic-button {
      margin-right: 8px;
      margin-bottom: 8px;
      padding: 8px 12px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: var(--transition);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    /* For subtopics, use shades based on category */
    .conceptual-active { 
      background-color: var(--primary); 
      color: white;
      transform: scale(1.05);
    }
    
    .conceptual-inactive { 
      background-color: #a5d6a7; 
      color: var(--primary-dark);
    }
    
    .conceptual-inactive:hover {
      background-color: #81c784;
    }
    
    .casestudy-active { 
      background-color: #1565c0; 
      color: white;
      transform: scale(1.05);
    }
    
    .casestudy-inactive { 
      background-color: #90caf9; 
      color: #0d47a1;
    }
    
    .casestudy-inactive:hover {
      background-color: #64b5f6;
    }
    
    /* Topic buttons */
    .topic-button {
      margin-right: 8px;
      margin-bottom: 12px;
      padding: 10px 16px;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      transition: var(--transition);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .hazards-topic-active { 
      background-color: var(--primary); 
      color: white;
      transform: scale(1.05);
    }
    
    .place-topic-active { 
      background-color: #1565c0; 
      color: white;
      transform: scale(1.05);
    }
    
    .topic-inactive { 
      background-color: #a5d6a7; 
      color: white;
    }
    
    .topic-inactive:hover {
      background-color: #81c784;
    }
    
    /* Flashcard container */
    .flashcard-container {
      background-color: white;
      border-radius: var(--border-radius);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      padding: 24px;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      cursor: pointer;
      border: 2px solid var(--primary);
      position: relative;
      transition: var(--transition);
      transform-style: preserve-3d;
      perspective: 1000px;
    }
    
    .flashcard-container:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0,0,0,0.15);
    }
    
    .flashcard-container.flip {
      animation: flipCard 0.6s ease-out forwards;
    }
    
    .progress-indicator {
      position: absolute;
      top: 12px;
      right: 16px;
      font-size: 0.9rem;
      color: var(--primary);
      font-weight: 500;
    }
    
    /* Answer text background */
    .flashcard-container .answer {
      background-color: transparent;
      padding: 8px;
      border-radius: 4px;
    }
    
    /* Fix for list items inside flashcard answers */
    .flashcard-container ul {
      background-color: transparent;
      list-style-type: disc;
      overflow: visible;
      margin-left: 20px;
      padding-left: 5px;
    }
    
    .flashcard-container li {
      float: none;
      background-color: transparent;
      color: var(--dark);
      margin-bottom: 6px;
      display: list-item;
    }
    
    /* Fix for list items inside the exam tips box */
    #app-container ul {
      background-color: transparent;
      list-style-type: disc;
      overflow: visible;
      margin-left: 20px;
      padding-left: 5px;
    }
    
    #app-container li {
      float: none;
      background-color: transparent;
      color: var(--dark);
      margin-bottom: 8px;
      display: list-item;
      clear: both;
    }
    
    /* Base styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    /* Navigation styles */
    .nav-container {
      background-color: var(--primary-dark);
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      position: relative;
    }
    
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
    }
    
    .logo img {
      width: 42px;
      height: 38px;
      vertical-align: middle;
    }
    
    .nav-menu {
      list-style-type: none;
      display: flex;
      align-items: center;
      transition: all 0.3s ease;
      margin-left: 0;
      width: 100%;
      justify-content: flex-start;
    }
    
    .nav-menu li {
      flex: 0 0 auto;
    }
    
    .nav-menu li a {
      display: block;
      color: white;
      text-align: center;
      padding: 20px 16px;
      text-decoration: none;
      white-space: nowrap;
      transition: background-color 0.2s;
    }
    
    .nav-menu li a:hover {
      background-color: var(--primary);
    }
    
    .menu-toggle {
      display: none;
      color: white;
      background: none;
      border: none;
      font-size: 24px;
      padding: 12px 16px;
      cursor: pointer;
      margin-left: auto;
    }
    
    /* Button styles */
    .btn {
      padding: 10px 20px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      border: none;
      display: inline-flex;
      align-items: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }
    
    .btn-primary:disabled {
      background-color: #bdbdbd;
      cursor: not-allowed;
      transform: none;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes slideUp {
      from { 
        opacity: 0;
        transform: translateY(20px);
      }
      to { 
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes flipCard {
      0% { transform: rotateY(0); }
      50% { transform: rotateY(90deg); }
      100% { transform: rotateY(0); }
    }
    
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    
    .pulse {
      animation: pulse 1.5s infinite;
    }
    
    /* Media queries for responsive design */
    @media screen and (max-width: 1100px) {
      .nav-container {
        flex-wrap: wrap;
        padding: 0;
      }
      
      .logo {
        padding: 10px 20px;
      }
      
      .menu-toggle {
        display: block !important;
      }
      
      .nav-menu {
        display: none;
        width: 100%;
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        background-color: var(--primary-dark);
        z-index: 99;
      }
      
      .nav-menu.active {
        display: flex !important;
      }
      
      .nav-menu li {
        width: 100%;
      }
      
      .nav-menu li a {
        text-align: left;
        padding: 16px 20px;
        border-top: 1px solid var(--primary);
      }
      
      .subtopic-button, .topic-button {
        margin-right: 6px;
        margin-bottom: 6px;
        padding: 6px 10px;
        font-size: 0.85rem;
      }
    }
    
    @media screen and (max-width: 768px) {
      .flashcard-container {
        min-height: 250px;
        padding: 16px;
      }
      
      .legend {
        font-size: 0.8rem;
      }
      
      .legend span.box {
        width: 12px;
        height: 12px;
      }
    }
  </style>
  <title>Geography Flashcards</title>
  <!-- React and ReactDOM CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
  <!-- Navigation with hamburger menu for tablets and mobile -->
  <div class="nav-container">
    <a href="index.html" class="logo">
      <img src="Logo.png" alt="Logo">
    </a>
    <button class="menu-toggle" aria-label="Toggle navigation menu">☰</button>
    <ul class="nav-menu">
      <li><a href="PR.html">GCSE Past Papers</a></li>
      <li><a href="APR.html">A Level Papers</a></li>
      <li><a href="SPBE.html">Geography Flashcards</a></li>
      <li><a href="BWT.html">Case Studies</a></li>
    </ul>
  </div>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const menuToggle = document.querySelector('.menu-toggle');
      const navMenu = document.querySelector('.nav-menu');

      // Simply toggle the active class on click
      menuToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        navMenu.classList.toggle('active');
      });

      // Close menu when clicking outside
      document.addEventListener('click', function(event) {
        if (navMenu.classList.contains('active') &&
            !navMenu.contains(event.target) &&
            !menuToggle.contains(event.target)) {
          navMenu.classList.remove('active');
        }
      });

      // Handle window resize
      window.addEventListener('resize', function() {
        if (window.innerWidth > 1100) {
          navMenu.classList.remove('active');
        }
      });
    });
  </script>
  
  <!-- React App Container -->
  <div id="app-container"></div>
  
  <!-- React Component -->
  <script type="text/babel">
    const GeographyFlashcardApp = () => {
      // State declarations
      const [flashcards, setFlashcards] = React.useState([]);
      const [currentCardIndex, setCurrentCardIndex] = React.useState(0);
      const [showAnswer, setShowAnswer] = React.useState(false);
      const [searchTerm, setSearchTerm] = React.useState('');
      const [filteredCards, setFilteredCards] = React.useState([]);
      const [showStats, setShowStats] = React.useState(false);
      const [cardStats, setCardStats] = React.useState({});
      const [isFlipping, setIsFlipping] = React.useState(false);
      // States for topic and subtopic selection
      const [selectedTopic, setSelectedTopic] = React.useState(null);
      const [selectedSubtopic, setSelectedSubtopic] = React.useState({ category: null, name: null });
      
      // Define subtopics for each main topic
      const hazardsConceptual = [
        "Concept of Hazard in Geography",
        "Plate Tectonics and Hazards",
        "Volcanic Hazards",
        "Seismic Hazards",
        "Storm Hazards",
        "Wildfire Hazards",
        "Multi-Hazard Environments",
        "Risk Management & Resilience",
        "Fold Mountains Formation",
        "Rift Valleys & Ocean Ridges"
      ];
      
      const hazardsCaseStudies = [
        "Mt Etna",
        "Mt Merapi",
        "Eyjafjallajökull",
        "Montserrat",
        "Yellowstone",
        "Boxing Day Tsunami",
        "Haiti",
        "Cyclone Nargis",
        "Hurricane Katrina",
        "LA Wildfire",
        "Alberta Wildfire",
        "Tohoku",
        "Typhoon Haiyan"
      ];
      
      const placeConceptual = [
        "Concept of Place & Identity",
        "Insider vs Outsider Perspectives",
        "Economic Change & Population Trends",
        "Urbanisation & Migration",
        "Sustainable Urban Development",
        "Big Data & GIS in Geography",
        "Oral Data & Local Narratives",
        "Spatial Patterns & Land Use",
        "Cultural & Social Change"
      ];
      
      const placeCaseStudies = [
        "Ground Zero",
        "Plymouth",
        "Detroit",
        "London Olympics",
        "Medellin",
        "Bourneville",
        "Devonport",
        "Stonehenge",
        "Glastonbury"
      ];
      
      // Main topic configuration
      const topicConfig = [
        {
          topic: "Hazards",
          activeColor: "#2e7d32",
          conceptual: hazardsConceptual,
          caseStudies: hazardsCaseStudies
        },
        {
          topic: "Place",
          activeColor: "#1565c0",
          conceptual: placeConceptual,
          caseStudies: placeCaseStudies
        }
      ];
      
      // Detailed case study facts
      const hazardsCaseStudyFacts = {
        "Mt Etna": `<ul>
  <li>VEI: 2-3</li>
  <li>2021 eruption: ash plume up to 3 km high</li>
  <li>Casualties: minimal due to monitoring</li>
</ul>`,
        "Mt Merapi": `<ul>
  <li>2010 eruption: VEI 4</li>
  <li>Deaths: ~353</li>
  <li>Injuries: >1,000; significant infrastructure damage</li>
</ul>`,
        "Eyjafjallajökull": `<ul>
  <li>2010 eruption: VEI 4</li>
  <li>Ash cloud: reached 9 km high, disrupted European air travel for 6 days</li>
  <li>Direct casualties: minimal</li>
</ul>`,
        "Montserrat": `<ul>
  <li>Active since 1995</li>
  <li>Evacuation: ~2/3 of population</li>
  <li>Long-term socio-economic impact</li>
</ul>`,
        "Yellowstone": `<ul>
  <li>Supervolcano; last major eruption: >600,000 years ago</li>
  <li>Potential eruption: VEI 8; catastrophic global impact</li>
</ul>`,
        "Boxing Day Tsunami": `<ul>
  <li>Triggered by 9.1-9.3 magnitude earthquake in 2004</li>
  <li>Deaths: ~230,000</li>
  <li>Massive infrastructural damage</li>
</ul>`,
        "Haiti": `<ul>
  <li>2010 earthquake: magnitude 7.0</li>
  <li>Deaths: >230,000; Injuries: ~300,000</li>
  <li>Damage: $8-14 billion</li>
</ul>`,
        "Cyclone Nargis": `<ul>
  <li>2008 event in Myanmar</li>
  <li>Deaths: ~138,000; Millions displaced</li>
  <li>Severe infrastructure damage</li>
</ul>`,
        "Hurricane Katrina": `<ul>
  <li>2005 event: ~1,833 deaths</li>
  <li>Displacement: >250,000 people</li>
  <li>Damage: >$125 billion</li>
</ul>`,
        "LA Wildfire": `<ul>
  <li>Recent events: evacuations and property losses >$2 billion</li>
  <li>Widespread damage in urban areas</li>
</ul>`,
        "Alberta Wildfire": `<ul>
  <li>2016 season: burned millions of acres</li>
  <li>Significant regional damage</li>
</ul>`,
        "Tohoku": `<ul>
  <li>2011 earthquake/tsunami: magnitude 9.0</li>
  <li>Deaths: ~15,000; nuclear crisis triggered</li>
  <li>Long-term environmental and infrastructural challenges</li>
</ul>`,
        "Typhoon Haiyan": `<ul>
  <li>2013 event in the Philippines</li>
  <li>Deaths: >6,300; one of the strongest cyclones recorded</li>
  <li>Widespread destruction</li>
</ul>`
      };
      
      const placeCaseStudyFacts = {
        "Ground Zero": `<ul>
  <li>Site of 9/11 attacks; major redevelopment</li>
  <li>Significantly impacted New York's economic and cultural identity</li>
</ul>`,
        "Plymouth": `<ul>
  <li>Underwent substantial economic changes and urban regeneration</li>
  <li>Shift in population and employment trends</li>
</ul>`,
        "Detroit": `<ul>
  <li>Population decline of over 60% from peak</li>
  <li>Significant economic loss due to industrial decline; revitalisation efforts ongoing</li>
</ul>`,
        "London Olympics": `<ul>
  <li>2012 Olympics spurred major urban regeneration</li>
  <li>Boosted local economy and altered demographic patterns</li>
</ul>`,
        "Medellin": `<ul>
  <li>Transformation from violence to innovation-driven urban revival</li>
  <li>Enhanced urban design and economic growth</li>
</ul>`,
        "Bourneville": `<ul>
  <li>Industrial heritage from Cadburys</li>
  <li>Economic changes redefined community identity</li>
</ul>`,
        "Devonport": `<ul>
  <li>Shift in naval and industrial activity</li>
  <li>Notable demographic and economic changes</li>
</ul>`,
        "Stonehenge": `<ul>
  <li>Iconic monument driving tourism</li>
  <li>Major contributor to regional economic activity and identity</li>
</ul>`,
        "Glastonbury": `<ul>
  <li>Famous for cultural festivals and historical legacy</li>
  <li>Exemplifies the blend of heritage and modern economic trends</li>
</ul>`
      };
      
      // Helper functions to generate flashcards
      const generateConceptualFlashcards = (subtopic, topicType) => {
        let cards = [];
        if(topicType === "Hazards") {
          cards.push({
            id: 0,
            question: `Define and explain the significance of "${subtopic}".`,
            answer: `<ul>
  <li>Definition: ${subtopic} encompasses the key principles used to understand natural hazards.</li>
  <li>Significance: It aids in risk assessment, prediction, and disaster management.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Discuss the underlying processes of "${subtopic}".`,
            answer: `<ul>
  <li>Processes include tectonic activity, atmospheric dynamics, and erosion mechanisms.</li>
  <li>These processes determine the frequency and intensity of hazards.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Evaluate management strategies for "${subtopic}".`,
            answer: `<ul>
  <li>Immediate responses: emergency evacuations, rapid aid deployment.</li>
  <li>Long-term strategies: infrastructure upgrades, policy reforms, hazard modeling.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Explain how data analysis improves our understanding of "${subtopic}".`,
            answer: `<ul>
  <li>Use of GIS and big data enables detailed hazard mapping.</li>
  <li>Remote sensing and statistical analysis provide real-time insights.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `How do theoretical models guide responses to "${subtopic}"?`,
            answer: `<ul>
  <li>Models (e.g., Hazard Management Cycle) outline disaster response stages.</li>
  <li>They inform both policy and practical emergency planning.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Outline the formation processes of fold mountains in relation to "${subtopic}".`,
            answer: `<ul>
  <li>Converging tectonic plates compress and fold the crust.</li>
  <li>Uplift and differential erosion create characteristic mountain ranges.</li>
  <li>Examples include the Himalayas and the Andes.</li>
</ul>`,
            subtopic: subtopic
          });
        } else if(topicType === "Place") {
          cards.push({
            id: 0,
            question: `Define "${subtopic}" in a geographical context.`,
            answer: `<ul>
  <li>Definition: ${subtopic} examines the physical, cultural, and economic attributes of a location.</li>
  <li>It is fundamental to understanding place identity and evolution.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Discuss the main factors influencing "${subtopic}" in urban settings.`,
            answer: `<ul>
  <li>Key factors: economic trends, migration, infrastructure, and policy.</li>
  <li>These shape demographic and spatial changes in cities.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Examine the role of technology and big data in understanding "${subtopic}".`,
            answer: `<ul>
  <li>GIS and big data tools enable precise mapping of urban trends.</li>
  <li>They support data-driven urban planning and regeneration efforts.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Evaluate how oral narratives contribute to "${subtopic}".`,
            answer: `<ul>
  <li>Local narratives provide qualitative insights into community identity.</li>
  <li>They complement quantitative data, enriching our overall understanding.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `How do changes in economic indicators affect "${subtopic}"?`,
            answer: `<ul>
  <li>Indicators like income levels, employment rates, and investment directly influence urban form.</li>
  <li>They drive redevelopment and alter population patterns.</li>
</ul>`,
            subtopic: subtopic
          });
          cards.push({
            id: 0,
            question: `Discuss the challenges and benefits of urban regeneration in the context of "${subtopic}".`,
            answer: `<ul>
  <li>Benefits: boosted local economies, improved infrastructure.</li>
  <li>Challenges: risk of gentrification, displacement of residents.</li>
</ul>`,
            subtopic: subtopic
          });
        }
        return cards;
      };
      
      const generateCaseStudyFlashcards = (caseStudyName, topicType) => {
        let cards = [];
        if(topicType === "Hazards") {
          const facts = hazardsCaseStudyFacts[caseStudyName] || "";
          cards.push({
            id: 0,
            question: `Describe the key details of the "${caseStudyName}" case study.`,
            answer: `<ul>
  ${facts}
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Analyze the immediate and long-term responses for "${caseStudyName}".`,
            answer: `<ul>
  <li>Immediate: Emergency evacuations, international aid, rescue operations.</li>
  <li>Long-term: Infrastructure rebuilding, policy reforms, improved risk management.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Evaluate how "${caseStudyName}" influenced hazard management policies.`,
            answer: `<ul>
  <li>Prompted revisions in building codes and emergency planning.</li>
  <li>Led to increased investment in early warning and disaster preparedness systems.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Discuss the overall significance of the "${caseStudyName}" case study in understanding natural hazards.`,
            answer: `<ul>
  <li>Highlights the scale and complexity of hazard events.</li>
  <li>Provides statistical evidence that supports policy changes.</li>
  <li>Serves as a benchmark for future disaster management improvements.</li>
</ul>`,
            subtopic: caseStudyName
          });
        } else if(topicType === "Place") {
          const facts = placeCaseStudyFacts[caseStudyName] || "";
          cards.push({
            id: 0,
            question: `Outline the key economic and population statistics for "${caseStudyName}".`,
            answer: `<ul>
  ${facts}
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Discuss the impact of "${caseStudyName}" on local identity and regional development.`,
            answer: `<ul>
  <li>Major shifts in economic structure and population demographics.</li>
  <li>Urban regeneration initiatives transformed local identity and boosted tourism.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Analyze how historical events at "${caseStudyName}" have shaped its current profile.`,
            answer: `<ul>
  <li>Historical events led to major redevelopment and demographic changes.</li>
  <li>Economic data such as employment trends support these shifts.</li>
</ul>`,
            subtopic: caseStudyName
          });
          cards.push({
            id: 0,
            question: `Evaluate the role of policy and planning at "${caseStudyName}".`,
            answer: `<ul>
  <li>Local and national policies have guided redevelopment and economic recovery.</li>
  <li>Evidence-based planning using both quantitative and qualitative data has been crucial.</li>
</ul>`,
            subtopic: caseStudyName
          });
        }
        return cards;
      };
      
      // Generate all flashcards dynamically
      React.useEffect(() => {
        let generatedFlashcards = [];
        let idCounter = 1;
        
        // Hazards: conceptual flashcards
        topicConfig.find(t => t.topic === "Hazards").conceptual.forEach(sub => {
          const cards = generateConceptualFlashcards(sub, "Hazards");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        
        // Hazards: case study flashcards
        topicConfig.find(t => t.topic === "Hazards").caseStudies.forEach(sub => {
          const cards = generateCaseStudyFlashcards(sub, "Hazards");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        
        // Place: conceptual flashcards
        topicConfig.find(t => t.topic === "Place").conceptual.forEach(sub => {
          const cards = generateConceptualFlashcards(sub, "Place");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        
        // Place: case study flashcards
        topicConfig.find(t => t.topic === "Place").caseStudies.forEach(sub => {
          const cards = generateCaseStudyFlashcards(sub, "Place");
          cards.forEach(card => {
            card.id = idCounter++;
            generatedFlashcards.push(card);
          });
        });
        
        setFlashcards(generatedFlashcards);
        
        // Initialize stats for each flashcard
        const initialStats = {};
        generatedFlashcards.forEach(card => {
          initialStats[card.id] = {
            timesReviewed: 0,
            timesCorrect: 0,
            lastReviewed: null,
            nextReview: new Date()
          };
        });
        setCardStats(initialStats);
      }, []);
      
      // Filter flashcards based on search, topic, and subtopic selections
      React.useEffect(() => {
        let filtered = [...flashcards];
        if (searchTerm) {
          const term = searchTerm.toLowerCase();
          filtered = filtered.filter(card =>
            card.question.toLowerCase().includes(term) ||
            card.answer.toLowerCase().includes(term) ||
            (card.subtopic && card.subtopic.toLowerCase().includes(term))
          );
        }
        if (selectedTopic) {
          const config = topicConfig.find(item => item.topic === selectedTopic);
          if (config) {
            const allSubs = [...config.conceptual, ...config.caseStudies];
            filtered = filtered.filter(card => allSubs.includes(card.subtopic));
          }
        }
        if (selectedSubtopic.name) {
          filtered = filtered.filter(card => card.subtopic === selectedSubtopic.name);
        }
        setFilteredCards(filtered);
        if (filtered.length > 0) {
          setCurrentCardIndex(0);
          setShowAnswer(false);
        }
      }, [flashcards, searchTerm, selectedTopic, selectedSubtopic]);
      
      // Navigation functions with animations
      const nextCard = () => {
        if (filteredCards.length === 0) return;
        
        setIsFlipping(true);
        setTimeout(() => {
          if (currentCardIndex < filteredCards.length - 1) {
            setCurrentCardIndex(currentCardIndex + 1);
          } else {
            setCurrentCardIndex(0);
          }
          setShowAnswer(false);
          setIsFlipping(false);
        }, 300);
      };
      
      const prevCard = () => {
        if (filteredCards.length === 0 || currentCardIndex === 0) return;
        
        setIsFlipping(true);
        setTimeout(() => {
          setCurrentCardIndex(currentCardIndex - 1);
          setShowAnswer(false);
          setIsFlipping(false);
        }, 300);
      };
      
      const toggleAnswer = () => {
        if (isFlipping) return;
        
        setIsFlipping(true);
        setTimeout(() => {
          setShowAnswer(!showAnswer);
          if (!showAnswer && filteredCards.length > 0) {
            const currentCard = filteredCards[currentCardIndex];
            const updatedStats = { ...cardStats };
            updatedStats[currentCard.id] = {
              ...updatedStats[currentCard.id],
              timesReviewed: (updatedStats[currentCard.id].timesReviewed || 0) + 1,
              lastReviewed: new Date()
            };
            setCardStats(updatedStats);
          }
          setIsFlipping(false);
        }, 150);
      };
      
      // Statistics component
      const Statistics = () => {
        const totalCards = flashcards.length;
        const reviewedCards = Object.values(cardStats).filter(stat => stat.timesReviewed > 0).length;
        const reviewPercentage = Math.round((reviewedCards / totalCards) * 100);
        
        return (
          <div style={{ 
            backgroundColor: "#e6f5e6", 
            border: "2px solid var(--primary)", 
            borderRadius: "var(--border-radius)", 
            padding: "20px", 
            maxWidth: "600px", 
            margin: "24px auto", 
            boxShadow: "var(--box-shadow)",
            animation: "fadeIn 0.5s ease-out"
          }}>
            <h3 style={{ 
              fontSize: "1.25rem", 
              fontWeight: "bold", 
              marginBottom: "16px", 
              color: "var(--primary-dark)",
              textAlign: "center"
            }}>
              <i className="fas fa-chart-line" style={{ marginRight: "8px" }}></i>
              Your Study Statistics
            </h3>
            
            <div style={{ 
              display: "grid", 
              gridTemplateColumns: "repeat(auto-fit, minmax(150px, 1fr))", 
              gap: "12px",
              marginBottom: "16px"
            }}>
              <div style={{ 
                backgroundColor: "#c8e6c9", 
                padding: "16px", 
                borderRadius: "var(--border-radius)", 
                textAlign: "center", 
                border: "1px solid var(--primary)",
                boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
              }}>
                <div style={{ 
                  fontSize: "1.75rem", 
                  fontWeight: "bold", 
                  color: "var(--primary-dark)",
                  marginBottom: "4px"
                }}>{totalCards}</div>
                <div style={{ fontSize: "0.875rem" }}>Total Cards</div>
              </div>
              
              <div style={{ 
                backgroundColor: "#c8e6c9", 
                padding: "16px", 
                borderRadius: "var(--border-radius)", 
                textAlign: "center", 
                border: "1px solid var(--primary)",
                boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
              }}>
                <div style={{ 
                  fontSize: "1.75rem", 
                  fontWeight: "bold", 
                  color: "var(--primary-dark)",
                  marginBottom: "4px"
                }}>{reviewedCards}</div>
                <div style={{ fontSize: "0.875rem" }}>Reviewed</div>
              </div>
              
              <div style={{ 
                backgroundColor: "#c8e6c9", 
                padding: "16px", 
                borderRadius: "var(--border-radius)", 
                textAlign: "center", 
                border: "1px solid var(--primary)",
                boxShadow: "0 2px 4px rgba(0,0,0,0.1)"
              }}>
                <div style={{ 
                  fontSize: "1.75rem", 
                  fontWeight: "bold", 
                  color: "var(--primary-dark)",
                  marginBottom: "4px"
                }}>{reviewPercentage}%</div>
                <div style={{ fontSize: "0.875rem" }}>Completion</div>
              </div>
            </div>
            
            <div style={{ 
              marginTop: "16px",
              textAlign: "center"
            }}>
              <button 
                onClick={() => setShowStats(false)}
                style={{
                  backgroundColor: "var(--primary)",
                  color: "white",
                  padding: "8px 16px",
                  borderRadius: "20px",
                  border: "none",
                  cursor: "pointer",
                  fontWeight: "500",
                  transition: "var(--transition)"
                }}
              >
                Close Statistics
              </button>
            </div>
          </div>
        );
      };
      
      // UI for subtopic selection
      const renderSubtopicButtons = () => {
        if (!selectedTopic) return null;
        const config = topicConfig.find(item => item.topic === selectedTopic);
        
        return (
          <div>
            <div className="subtopic-section">
              <h5><i className="fas fa-brain" style={{ marginRight: "8px" }}></i>Conceptual</h5>
              <div style={{ display: "flex", flexWrap: "wrap" }}>
                {config.conceptual.map(sub => (
                  <button 
                    key={sub} 
                    className={`subtopic-button ${selectedSubtopic.category==="Conceptual" && selectedSubtopic.name===sub ? "conceptual-active" : "conceptual-inactive"}`}
                    onClick={() => setSelectedSubtopic({ category: "Conceptual", name: sub })}
                  >
                    {sub.length > 20 ? sub.slice(0,20) + "…" : sub}
                  </button>
                ))}
              </div>
            </div>
            
            <div className="subtopic-section">
              <h5><i className="fas fa-map-marked-alt" style={{ marginRight: "8px" }}></i>Case Studies</h5>
              <div style={{ display: "flex", flexWrap: "wrap" }}>
                {config.caseStudies.map(sub => (
                  <button 
                    key={sub} 
                    className={`subtopic-button ${selectedSubtopic.category==="Case Study" && selectedSubtopic.name===sub ? "casestudy-active" : "casestudy-inactive"}`}
                    onClick={() => setSelectedSubtopic({ category: "Case Study", name: sub })}
                  >
                    {sub}
                  </button>
                ))}
              </div>
            </div>
            
            <button 
              className="subtopic-button topic-inactive" 
              onClick={() => setSelectedSubtopic({ category: null, name: null })}
              style={{ marginTop: "8px" }}
            >
              <i className="fas fa-undo" style={{ marginRight: "6px" }}></i>
              All Subtopics
            </button>
          </div>
        );
      };
      
      return (
        <div style={{ 
          minHeight: "100vh", 
          backgroundColor: "#f0f8f0", 
          padding: "20px",
          animation: "fadeIn 0.5s ease-out"
        }}>
          <div style={{ 
            maxWidth: "900px", 
            margin: "0 auto",
            animation: "slideUp 0.4s ease-out"
          }}>
            <header style={{ 
              textAlign: "center", 
              marginBottom: "24px",
              padding: "16px",
              backgroundColor: "#e8f5e9",
              borderRadius: "var(--border-radius)",
              boxShadow: "var(--box-shadow)",
              border: "2px solid var(--primary)"
            }}>
              <h1 style={{ 
                fontSize: "1.875rem", 
                fontWeight: "bold", 
                color: "var(--primary-dark)",
                marginBottom: "8px"
              }}>
                <i className="fas fa-globe-europe" style={{ marginRight: "10px" }}></i>
                AQA Geography AS Level Revision
              </h1>
              <p style={{ 
                fontSize: "1rem", 
                color: "var(--dark)",
                marginBottom: "0"
              }}>
                Interactive flashcards for comprehensive exam preparation
              </p>
            </header>
            
            {/* Legend */}
            <div className="legend">
              <h4 style={{ 
                marginTop: "0", 
                marginBottom: "12px", 
                color: "var(--primary-dark)",
                fontWeight: "600"
              }}>
                <i className="fas fa-info-circle" style={{ marginRight: "8px" }}></i>
                Color Legend
              </h4>
              <div><span className="box hazards-active"></span> Hazards Topic (Active)</div>
              <div><span className="box place-active"></span> Place Topic (Active)</div>
              <div><span className="box topic-inactive"></span> Inactive Topic</div>
              <div><span className="box conceptual-active"></span> Conceptual Subtopic (Active)</div>
              <div><span className="box conceptual-inactive"></span> Conceptual Subtopic (Inactive)</div>
              <div><span className="box casestudy-active"></span> Case Study Subtopic (Active)</div>
              <div><span className="box casestudy-inactive"></span> Case Study Subtopic (Inactive)</div>
            </div>
            
            {/* Controls */}
            <div style={{ 
              backgroundColor: "#e8f5e9", 
              borderRadius: "var(--border-radius)", 
              boxShadow: "var(--box-shadow)", 
              padding: "20px", 
              marginBottom: "24px", 
              border: "2px solid var(--primary)"
            }}>
              <div style={{ marginBottom: "20px" }}>
                <label style={{ 
                  display: "block", 
                  fontSize: "0.875rem", 
                  fontWeight: "500", 
                  marginBottom: "8px", 
                  color: "var(--primary-dark)"
                }}>
                  <i className="fas fa-search" style={{ marginRight: "8px" }}></i>
                  Search Flashcards
                </label>
                <input
                  type="text"
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  placeholder="Search questions, answers, or subtopics..."
                  style={{ 
                    width: "100%", 
                    padding: "10px", 
                    border: "1px solid var(--primary)", 
                    borderRadius: "var(--border-radius)", 
                    backgroundColor: "white",
                    fontSize: "1rem",
                    transition: "var(--transition)"
                  }}
                />
              </div>
              
              {/* Topic selection */}
              <div style={{ marginBottom: "20px" }}>
                <h4 style={{ 
                  color: "var(--primary-dark)", 
                  marginBottom: "12px",
                  display: "flex",
                  alignItems: "center"
                }}>
                  <i className="fas fa-layer-group" style={{ marginRight: "8px" }}></i>
                  Select Topic:
                </h4>
                <div style={{ display: "flex", flexWrap: "wrap" }}>
                  {topicConfig.map(item => (
                    <button
                      key={item.topic}
                      onClick={() => { 
                        setSelectedTopic(item.topic); 
                        setSelectedSubtopic({ category: null, name: null }); 
                      }}
                      className="topic-button"
                      style={{ 
                        backgroundColor: selectedTopic === item.topic ? item.activeColor : "#757575",
                        marginRight: "10px",
                        marginBottom: "10px"
                      }}
                    >
                      {item.topic}
                    </button>
                  ))}
                  <button
                    onClick={() => { 
                      setSelectedTopic(null); 
                      setSelectedSubtopic({ category: null, name: null }); 
                    }}
                    className="topic-button topic-inactive"
                    style={{ marginBottom: "10px" }}
                  >
                    All Topics
                  </button>
                </div>
              </div>
              
              {renderSubtopicButtons()}
              
              <div style={{ 
                display: "flex", 
                justifyContent: "space-between",
                alignItems: "center",
                marginTop: "16px"
              }}>
                <div style={{ 
                  fontSize: "0.875rem", 
                  color: "var(--primary)",
                  fontWeight: "500"
                }}>
                  {filteredCards.length} cards {filteredCards.length > 0 ? `(Card ${currentCardIndex + 1} of ${filteredCards.length})` : ''}
                </div>
                <button 
                  onClick={() => setShowStats(!showStats)} 
                  style={{ 
                    color: "var(--primary)", 
                    fontWeight: "500",
                    backgroundColor: "#e8f5e9",
                    border: "1px solid var(--primary)",
                    borderRadius: "20px",
                    padding: "6px 12px",
                    cursor: "pointer",
                    transition: "var(--transition)"
                  }}
                >
                  <i className="fas fa-chart-pie" style={{ marginRight: "6px" }}></i>
                  {showStats ? 'Hide Statistics' : 'Show Statistics'}
                </button>
              </div>
            </div>
            
            {showStats && <Statistics />}
            
            {/* Flashcards */}
            {filteredCards.length > 0 ? (
              <div style={{ 
                width: "100%", 
                maxWidth: "600px", 
                margin: "0 auto",
                perspective: "1000px"
              }}>
                <div 
                  className={`flashcard-container ${isFlipping ? "flip" : ""}`}
                  onClick={toggleAnswer}
                >
                  <div className="progress-indicator">
                    <i className="fas fa-clipboard-list" style={{ marginRight: "6px" }}></i>
                    Card {currentCardIndex + 1}/{filteredCards.length}
                  </div>
                  <div style={{ 
                    display: "flex", 
                    justifyContent: "space-between", 
                    fontSize: "0.875rem", 
                    color: "var(--primary)", 
                    marginBottom: "12px",
                    fontWeight: "500"
                  }}>
                    <div>
                      <i className="fas fa-tag" style={{ marginRight: "6px" }}></i>
                      Subtopic: <span style={{ fontWeight: "600", textTransform: "capitalize" }}>
                        {filteredCards[currentCardIndex].subtopic}
                      </span>
                    </div>
                  </div>
                  <div style={{ flexGrow: 1 }}>
                    {!showAnswer ? (
                      <div>
                        <h3 style={{ 
                          fontSize: "1.25rem", 
                          fontWeight: "bold", 
                          marginBottom: "16px", 
                          color: "var(--primary-dark)",
                          display: "flex",
                          alignItems: "center"
                        }}>
                          <i className="fas fa-question-circle" style={{ marginRight: "10px" }}></i>
                          Question:
                        </h3>
                        <p style={{ 
                          fontSize: "1.125rem", 
                          color: "var(--dark)",
                          lineHeight: "1.6"
                        }}>
                          {filteredCards[currentCardIndex].question}
                        </p>
                      </div>
                    ) : (
                      <div>
                        <h3 style={{ 
                          fontSize: "1.25rem", 
                          fontWeight: "bold", 
                          marginBottom: "12px", 
                          color: "var(--primary-dark)",
                          display: "flex",
                          alignItems: "center"
                        }}>
                          <i className="fas fa-lightbulb" style={{ marginRight: "10px" }}></i>
                          Answer:
                        </h3>
                        <div style={{ 
                          fontSize: "1.125rem", 
                          color: "var(--dark)", 
                          whiteSpace: "pre-line",
                          lineHeight: "1.6"
                        }} dangerouslySetInnerHTML={{ __html: filteredCards[currentCardIndex].answer }}></div>
                      </div>
                    )}
                  </div>
                  <div style={{ 
                    textAlign: "center", 
                    fontSize: "0.875rem", 
                    color: "var(--primary)", 
                    marginTop: "16px",
                    fontWeight: "500"
                  }}>
                    {!showAnswer ? (
                      <>
                        <i className="fas fa-hand-pointer" style={{ marginRight: "6px" }}></i>
                        Click to reveal answer
                      </>
                    ) : (
                      <>
                        <i className="fas fa-eye-slash" style={{ marginRight: "6px" }}></i>
                        Click card again to hide answer
                      </>
                    )}
                  </div>
                </div>
                
                <div style={{ 
                  display: "flex", 
                  justifyContent: "space-between", 
                  marginTop: "20px"
                }}>
                  <button 
                    onClick={prevCard} 
                    disabled={currentCardIndex === 0} 
                    className="btn btn-primary"
                    style={{
                      backgroundColor: currentCardIndex === 0 ? "#bdbdbd" : "var(--primary)",
                      cursor: currentCardIndex === 0 ? "not-allowed" : "pointer"
                    }}
                  >
                    <i className="fas fa-arrow-left" style={{ marginRight: "6px" }}></i>
                    Previous
                  </button>
                  <button 
                    onClick={nextCard} 
                    className="btn btn-primary"
                  >
                    Next
                    <i className="fas fa-arrow-right" style={{ marginLeft: "6px" }}></i>
                  </button>
                </div>
              </div>
            ) : (
              <div style={{ 
                textAlign: "center", 
                padding: "24px", 
                backgroundColor: "#e8f5e9", 
                borderRadius: "var(--border-radius)", 
                boxShadow: "var(--box-shadow)", 
                border: "2px solid var(--primary)",
                animation: "fadeIn 0.5s ease-out"
              }}>
                <p style={{ 
                  fontSize: "1.125rem", 
                  color: "var(--primary-dark)",
                  marginBottom: "16px"
                }}>
                  <i className="fas fa-exclamation-circle" style={{ marginRight: "8px" }}></i>
                  No flashcards match your search criteria.
                </p>
                <button 
                  onClick={() => {
                    setSearchTerm('');
                    setSelectedTopic(null);
                    setSelectedSubtopic({ category: null, name: null });
                  }}
                  className="btn btn-primary"
                >
                  <i className="fas fa-sync-alt" style={{ marginRight: "6px" }}></i>
                  Reset Filters
                </button>
              </div>
            )}
            
            {/* Exam Tips */}
            <div style={{ 
              marginTop: "32px", 
              backgroundColor: "#e8f5e9", 
              borderRadius: "var(--border-radius)", 
              boxShadow: "var(--box-shadow)", 
              padding: "20px", 
              border: "2px solid var(--primary)",
              animation: "fadeIn 0.5s ease-out"
            }}>
              <h3 style={{ 
                fontSize: "1.25rem", 
                fontWeight: "bold", 
                color: "var(--primary-dark)", 
                marginBottom: "12px",
                display: "flex",
                alignItems: "center"
              }}>
                <i className="fas fa-lightbulb" style={{ marginRight: "10px" }}></i>
                AQA Geography Exam Tips
              </h3>
              <ul style={{ 
                listStyleType: "disc", 
                paddingLeft: "24px", 
                marginTop: "8px"
              }}>
                <li style={{ marginBottom: "8px" }}>
                  <strong>Use detailed case study data</strong> (e.g. magnitude, casualties, and damage figures).
                </li>
                <li style={{ marginBottom: "8px" }}>
                  <strong>Break down answers</strong> into clear bullet points for clarity.
                </li>
                <li style={{ marginBottom: "8px" }}>
                  <strong>Write in an exam style</strong>: concise, structured, and evidence-based.
                </li>
                <li style={{ marginBottom: "8px" }}>
                  <strong>Include both immediate responses</strong> and long-term implications.
                </li>
                <li>
                  <strong>For place studies</strong>, integrate economic and population statistics.
                </li>
              </ul>
            </div>
          </div>
        </div>
      );
    };
    
    ReactDOM.render(
      <GeographyFlashcardApp />,
      document.getElementById('app-container')
    );
  </script>
</body>
</html>